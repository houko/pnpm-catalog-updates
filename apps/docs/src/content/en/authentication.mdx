export const metadata = {
  title: 'Command Reference',
  description:
    'Complete reference guide for all pnpm-catalog-updates commands, options, and usage patterns.',
};

# Command Reference

Complete reference for all PCU commands and options. Learn about every command, flag, and configuration option available. {{ className: 'lead' }}

## Command Overview

PCU provides several main commands with both full names and convenient shortcuts:

| Full Command    | Shorthand | Description                                     |
| --------------- | --------- | ----------------------------------------------- |
| `pcu init`      | `pcu i`   | Initialize PNPM workspace and PCU configuration |
| `pcu check`     | `pcu -c`  | Check for outdated catalog dependencies         |
| `pcu update`    | `pcu -u`  | Update catalog dependencies                     |
| `pcu analyze`   | `pcu -a`  | Analyze impact of dependency updates            |
| `pcu workspace` | `pcu -s`  | Show workspace information and validation       |
| `pcu theme`     | `pcu -t`  | Configure color themes and UI settings          |
| `pcu security`  | `pcu sec` | Security vulnerability scanning and fixes       |
| `pcu help`      | `pcu -h`  | Display help information                        |

---

## `pcu init` - Initialize Workspace

Initialize a complete PNPM workspace environment with PCU configuration.

<CodeGroup>

```bash {{ title: 'Basic Usage' }}
pcu init
pcu i
```

```bash {{ title: 'With Options' }}
pcu init --force --verbose
pcu init --workspace ./my-project
pcu init --no-create-workspace
```

</CodeGroup>

### Options

<Properties>
  <Property name="--force" type="boolean">
    Overwrite existing configuration file
  </Property>
  <Property name="--create-workspace" type="boolean" default="true">
    Create PNPM workspace structure if missing
  </Property>
  <Property name="--no-create-workspace" type="boolean">
    Skip creating PNPM workspace structure
  </Property>
  <Property name="-w, --workspace" type="string">
    Workspace directory (default: current directory)
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Show detailed information
  </Property>
</Properties>

### Files Created

- `.pcurc.json` - PCU configuration with package rules and settings
- `package.json` - Workspace root package.json (if missing)
- `pnpm-workspace.yaml` - PNPM workspace configuration (if missing)
- `packages/` - Directory for workspace packages (if missing)

---

## `pcu check` - Check for Updates

Check for outdated dependencies in your pnpm workspace catalogs.

<CodeGroup>

```bash {{ title: 'Basic Check' }}
pcu check
pcu -c
pcu chk
```

```bash {{ title: 'Advanced Usage' }}
pcu -c --format minimal
pcu check --catalog node18 --include "react*"
pcu -c --target minor --prerelease
```

</CodeGroup>

### Options

<Properties>
  <Property name="--catalog" type="string">
    Check specific catalog only
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Output format: table, json, yaml, minimal
  </Property>
  <Property name="-t, --target" type="enum" default="latest">
    Update target: latest, greatest, minor, patch, newest
  </Property>
  <Property name="--prerelease" type="boolean">
    Include prerelease versions
  </Property>
  <Property name="--include" type="string">
    Include packages matching pattern
  </Property>
  <Property name="--exclude" type="string">
    Exclude packages matching pattern
  </Property>
</Properties>

### Output Formats

- **table**: Rich table format with colors and details
- **minimal**: Simple npm-check-updates style (package â†’ version)
- **json**: JSON output for programmatic use
- **yaml**: YAML output for configuration files

---

## `pcu update` - Update Dependencies

Update catalog dependencies to newer versions.

<CodeGroup>

```bash {{ title: 'Interactive Update' }}
pcu update --interactive
pcu -u -i
pcu u -i
```

```bash {{ title: 'Automated Update' }}
pcu -u --target minor --create-backup
pcu update --dry-run --verbose
```

</CodeGroup>

### Options

<Properties>
  <Property name="-i, --interactive" type="boolean">
    Interactive mode to choose updates
  </Property>
  <Property name="-d, --dry-run" type="boolean">
    Preview changes without writing files
  </Property>
  <Property name="-t, --target" type="enum" default="latest">
    Update target: latest, greatest, minor, patch, newest
  </Property>
  <Property name="--catalog" type="string">
    Update specific catalog only
  </Property>
  <Property name="--force" type="boolean">
    Force updates even if risky
  </Property>
  <Property name="-b, --create-backup" type="boolean">
    Create backup files before updating
  </Property>
</Properties>

---

## `pcu analyze` - Impact Analysis

Analyze the impact of updating a specific dependency.

<CodeGroup>

```bash {{ title: 'Basic Analysis' }}
pcu analyze default react
pcu a default react 18.3.0
pcu -a react17 @types/react
```

</CodeGroup>

### Arguments

<Properties>
  <Property name="catalog" type="string" required>
    Catalog name (e.g., 'default', 'react17')
  </Property>
  <Property name="package" type="string" required>
    Package name (e.g., 'react', '@types/node')
  </Property>
  <Property name="version" type="string">
    New version (optional, defaults to latest)
  </Property>
</Properties>

---

## `pcu workspace` - Workspace Info

Show workspace information and validation with comprehensive workspace analysis.

<CodeGroup>

```bash {{ title: 'Basic Info' }}
pcu workspace
pcu w
```

```bash {{ title: 'Validation & Stats' }}
pcu workspace --validate
pcu workspace --stats
pcu w --validate --stats --format json
```

</CodeGroup>

### Options

<Properties>
  <Property name="--validate" type="boolean">
    Validate workspace configuration and structure
  </Property>
  <Property name="-s, --stats" type="boolean">
    Show detailed workspace statistics
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Output format: table, json, yaml, minimal
  </Property>
</Properties>

### Output Information

#### Basic Info Mode (default)

- Workspace name and path
- Total package count
- Number of catalogs
- List of catalog names

#### Validation Mode (`--validate`)

- Configuration file validation
- Workspace structure validation
- Package.json consistency checks
- Catalog integrity verification
- Exit codes: 0 (valid), 1 (issues found)

#### Statistics Mode (`--stats`)

- Detailed package breakdown
- Dependency analysis
- Catalog usage statistics
- Workspace health metrics

### Usage Examples

#### Basic Workspace Information

```bash
pcu workspace
```

Displays workspace name, path, package count, and available catalogs.

#### Comprehensive Validation

```bash
pcu workspace --validate
```

Validates workspace configuration and structure, exits with appropriate code.

#### Detailed Statistics

```bash
pcu workspace --stats --format json
```

Shows detailed workspace statistics in JSON format.

#### Combined Analysis

```bash
pcu w --validate --stats
```

Performs validation and shows statistics together.

---

## `pcu theme` - Theme Configuration

Configure color themes and UI appearance.

<CodeGroup>

```bash {{ title: 'Theme Management' }}
pcu theme --list
pcu -t --set modern
pcu theme --interactive
```

</CodeGroup>

### Options

<Properties>
  <Property name="-s, --set" type="string">
    Set color theme: default, modern, minimal, neon
  </Property>
  <Property name="-l, --list" type="boolean">
    List all available themes
  </Property>
  <Property name="-i, --interactive" type="boolean">
    Launch interactive theme configuration wizard with guided setup
  </Property>
</Properties>

### Available Themes

- `default` - Balanced colors for general use
- `modern` - Vibrant colors for development environments
- `minimal` - Clean and simple for production environments
- `neon` - High contrast colors for presentations

### Usage Examples

#### List Available Themes

```bash
pcu theme --list
```

Shows all available themes with descriptions.

#### Set Theme Directly

```bash
pcu theme --set modern
pcu -t --set neon
```

Directly set a specific theme.

#### Interactive Theme Configuration

```bash
pcu theme --interactive
pcu -t -i
```

Launches a guided theme selection wizard that allows you to preview themes and configure UI settings interactively.

---

## `pcu security` - Security Vulnerability Scanning

Scan for security vulnerabilities using npm audit and optional Snyk integration, with automated fix capabilities.

<CodeGroup>

```bash {{ title: 'Basic Security Scan' }}
pcu security
pcu sec
```

```bash {{ title: 'Advanced Security Scanning' }}
pcu security --fix-vulns --severity high
pcu sec --snyk --include-dev
pcu security --format json --workspace ./my-project
```

</CodeGroup>

### Options

<Properties>
  <Property name="--audit" type="boolean" default="true">
    Perform npm audit scan
  </Property>
  <Property name="--fix-vulns" type="boolean">
    Automatically fix vulnerabilities using npm audit fix
  </Property>
  <Property name="--severity" type="enum">
    Filter by severity level: low, moderate, high, critical
  </Property>
  <Property name="--include-dev" type="boolean">
    Include development dependencies in scan
  </Property>
  <Property name="--snyk" type="boolean">
    Include Snyk security scan (requires snyk CLI)
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    Output format: table, json, yaml, minimal
  </Property>
  <Property name="-w, --workspace" type="string">
    Workspace directory path
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Show detailed vulnerability information
  </Property>
</Properties>

### Security Report Features

- **Comprehensive Scanning**: Integrates npm audit and Snyk for thorough vulnerability detection
- **Severity Classification**: Critical, high, moderate, low, and info level vulnerabilities
- **Automated Fixes**: Apply security patches automatically with `--fix-vulns`
- **Package Recommendations**: Suggests specific version updates to resolve vulnerabilities
- **Development Dependencies**: Option to include or exclude dev dependencies from scan
- **Exit Codes**: Returns appropriate exit codes (0 for clean, 1 for vulnerabilities found)

### Usage Examples

#### Basic Vulnerability Scan

```bash
pcu security
```

Performs a standard security scan using npm audit.

#### Scan with Automatic Fixes

```bash
pcu security --fix-vulns
```

Scans for vulnerabilities and automatically applies available fixes.

#### High Severity Filter

```bash
pcu security --severity high
```

Shows only high and critical severity vulnerabilities.

#### Comprehensive Scan with Snyk

```bash
pcu security --snyk --include-dev --verbose
```

Runs both npm audit and Snyk scan, including development dependencies with detailed output.

#### JSON Export for CI/CD

```bash
pcu security --format json > security-report.json
```

Exports security scan results as JSON for automated processing.

---

## Global Options

These options work with all commands:

<Properties>
  <Property name="-w, --workspace" type="string">
    Workspace directory path
  </Property>
  <Property name="-v, --verbose" type="boolean">
    Enable verbose logging
  </Property>
  <Property name="--no-color" type="boolean">
    Disable colored output
  </Property>
  <Property name="-V, --version" type="boolean">
    Output the version number
  </Property>
  <Property name="-h, --help" type="boolean">
    Display help for command
  </Property>
</Properties>
