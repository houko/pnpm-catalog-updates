export const metadata = {
  title: 'Examples',
  description:
    'Real-world examples and use cases for pnpm-catalog-updates. Learn from practical scenarios and common workflows.',
};

# Examples

Real-world examples and use cases to help you get the most out of PCU. From simple updates to complex monorepo management. {{ className: 'lead' }}

## Basic Workflows

### Daily Dependency Check

Check for updates as part of your daily development routine:

<CodeGroup>

```bash {{ title: 'Quick Check' }}
# Check for updates with simple output
pcu -c --format minimal

# Example output:
# react           ^18.2.0  →  ^18.3.0
# typescript      ^5.0.0   →  ^5.2.0
# @types/node     ^18.0.0  →  ^20.0.0
```

```bash {{ title: 'Detailed Check' }}
# Check with full table format
pcu -c

# Shows colored table with:
# - Package names
# - Current versions
# - Available versions
# - Update types (major/minor/patch)
# - Security indicators
```

</CodeGroup>

### Safe Updates with Backup

Update dependencies safely with automatic backups:

```bash
# Interactive updates with backup
pcu -i -b

# Or automated minor updates with backup
pcu -u --target minor --create-backup
```

### Target-Specific Updates

Update only specific types of changes:

<CodeGroup>

```bash {{ title: 'Conservative Updates' }}
# Only patch updates (bug fixes)
pcu -u --target patch

# Only minor updates (new features, no breaking changes)
pcu -u --target minor
```

```bash {{ title: 'Latest Everything' }}
# Update to latest versions (including major)
pcu -u --target latest

# Include prerelease versions
pcu -u --prerelease
```

</CodeGroup>

## Multi-Catalog Workspaces

### Legacy Support Scenario

Managing multiple React versions in one workspace:

<CodeGroup>

```yaml {{ title: 'pnpm-workspace.yaml' }}
packages:
  - "apps/*"
  - "packages/*"

catalog:
  # Default catalog - latest versions
  react: ^18.2.0
  react-dom: ^18.2.0
  @types/react: ^18.2.0

catalogs:
  # Legacy support
  react17:
    react: ^17.0.2
    react-dom: ^17.0.2
    @types/react: ^17.0.62

  # Beta testing
  react-next:
    react: ^19.0.0-beta
    react-dom: ^19.0.0-beta
```

```bash {{ title: 'Catalog-Specific Updates' }}
# Update only the default catalog
pcu -u --catalog default

# Update legacy React versions
pcu -u --catalog react17 --target minor

# Check beta versions
pcu -c --catalog react-next --prerelease
```

</CodeGroup>

### Package Usage

```json {{ title: 'package.json' }}
{
  "name": "@myorg/modern-app",
  "dependencies": {
    "react": "catalog:",
    "react-dom": "catalog:"
  }
}
```

```json {{ title: 'Legacy package.json' }}
{
  "name": "@myorg/legacy-app",
  "dependencies": {
    "react": "catalog:react17",
    "react-dom": "catalog:react17"
  }
}
```

## Configuration Examples

### React Ecosystem Management

Coordinated updates for React and related packages:

```json {{ title: '.pcurc.json' }}
{
  "packageRules": [
    {
      "patterns": ["react", "react-dom"],
      "target": "minor",
      "requireConfirmation": true,
      "relatedPackages": [
        "@types/react",
        "@types/react-dom",
        "react-router-dom",
        "@testing-library/react"
      ]
    }
  ],
  "security": {
    "autoFixVulnerabilities": true,
    "allowMajorForSecurity": true
  }
}
```

### TypeScript Project Configuration

Conservative TypeScript updates with automatic type definitions:

```json {{ title: '.pcurc.json' }}
{
  "packageRules": [
    {
      "patterns": ["typescript"],
      "target": "minor",
      "requireConfirmation": true
    },
    {
      "patterns": ["@types/*"],
      "target": "latest",
      "autoUpdate": true
    },
    {
      "patterns": ["eslint*", "@typescript-eslint/*"],
      "target": "minor",
      "groupUpdate": true
    }
  ]
}
```

### Enterprise Configuration

Enterprise-ready configuration with strict controls:

```json {{ title: '.pcurc.json' }}
{
  "defaults": {
    "target": "minor",
    "createBackup": true
  },
  "exclude": ["typescript", "@types/node", "react", "react-dom"],
  "security": {
    "autoFixVulnerabilities": true,
    "allowMajorForSecurity": true,
    "notifyOnSecurityUpdate": true
  },
  "advanced": {
    "concurrency": 3,
    "timeout": 60000,
    "retries": 5
  },
  "ui": {
    "theme": "minimal",
    "animations": false
  }
}
```

## CI/CD Integration

### GitHub Actions

Automate dependency checking in your CI pipeline:

<CodeGroup>

```yaml {{ title: '.github/workflows/dependencies.yml' }}
name: Check Dependencies

on:
  schedule:
    - cron: '0 9 * * MON'  # Every Monday at 9 AM
  workflow_dispatch:

jobs:
  check-deps:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install PCU
        run: npm install -g pnpm-catalog-updates

      - name: Check for updates
        run: pcu -c --format json > updates.json

      - name: Create Issue if Updates Available
        if: success()
        uses: actions/github-script@v7
        with:
          script: |
            const fs = require('fs');
            const updates = JSON.parse(fs.readFileSync('updates.json', 'utf8'));
            if (updates.length > 0) {
              github.rest.issues.create({
                owner: context.repo.owner,
                repo: context.repo.repo,
                title: 'Dependencies Update Available',
                body: `Found ${updates.length} packages that can be updated:

` +
                      updates.map(u => `- ${u.package}: ${u.current} → ${u.available}`).join('
')
              });
            }
```

```bash {{ title: 'Package.json Scripts' }}
# Add to your package.json
{
  "scripts": {
    "deps:check": "pcu -c",
    "deps:update": "pcu -i -b",
    "deps:update-minor": "pcu -u --target minor --create-backup",
    "deps:analyze": "pcu -a default"
  }
}
```

</CodeGroup>

## Error Handling and Troubleshooting

### Network Issues

Handle network problems and registry access:

```bash
# Increase timeout for slow connections
pcu -c --timeout 60000

# Reduce concurrency for unstable networks
pcu -u --concurrency 2
```

### Workspace Validation

Validate your workspace setup:

```bash
# Check workspace configuration
pcu -s --validate

# Get detailed workspace information
pcu -s --stats --verbose
```

### Private Registries

PCU automatically reads `.npmrc` and `.pnpmrc` configurations:

<CodeGroup>

```ini {{ title: '.npmrc' }}
@myorg:registry=https://npm.private-registry.com/
//npm.private-registry.com/:_authToken=${NPM_TOKEN}

registry=https://registry.npmjs.org/
```

```bash {{ title: 'Usage' }}
# PCU will automatically use your registry settings
pcu -c

# Check packages from private registry
pcu -c --include "@myorg/*"
```

</CodeGroup>

## Advanced Use Cases

### Impact Analysis

Analyze the impact of updating specific packages:

```bash
# Analyze React update impact
pcu -a default react

# Analyze with specific version
pcu -a default react 18.3.0

# Check impact across all catalogs
pcu -a react17 react 17.0.3
```

### Selective Updates

Update only specific packages or patterns:

```bash
# Update only React-related packages
pcu -u --include "react*"

# Update everything except core frameworks
pcu -u --exclude "react*,vue*,angular*"

# Update only type definitions
pcu -u --include "@types/*" --target latest
```

### Dry Run Analysis

Preview changes before applying them:

```bash
# See what would be updated
pcu -u --dry-run --verbose

# Preview with specific targets
pcu -u --dry-run --target minor --include "@types/*"
```

## Best Practices

### Daily Workflow

1. **Morning Check**: `pcu -c` to see available updates
2. **Review Impact**: Use `pcu -a` for significant updates
3. **Safe Update**: `pcu -i -b` for interactive updates with backup
4. **Test**: Run your test suite after updates
5. **Commit**: Commit dependency updates separately

### Team Workflow

1. **Shared Configuration**: Commit `.pcurc.json` to version control
2. **Regular Reviews**: Schedule weekly dependency review meetings
3. **Security Priority**: Always prioritize security updates
4. **Documentation**: Document major dependency decisions
5. **Rollback Plan**: Keep backups for easy rollback

### Release Workflow

1. **Pre-release Check**: `pcu -c --target patch` before releases
2. **Security Scan**: Enable `autoFixVulnerabilities` in CI
3. **Version Pinning**: Use exact versions for production releases
4. **Update Schedule**: Plan dependency updates between releasesexport const metadata = {
   title: 'Examples',
   description:
   'Real-world examples and use cases for pnpm-catalog-updates. Learn from practical scenarios and common workflows.',
   };

# Examples

Real-world examples and use cases to help you get the most out of PCU. From simple updates to complex monorepo management. {{ className: 'lead' }}

## Basic Workflows

### Daily Dependency Check

Check for updates as part of your daily development routine:

<CodeGroup>

```bash {{ title: 'Quick Check' }}
# Check for updates with simple output
pcu -c --format minimal

# Example output:
# react           ^18.2.0  →  ^18.3.0
# typescript      ^5.0.0   →  ^5.2.0
# @types/node     ^18.0.0  →  ^20.0.0
```

```bash {{ title: 'Detailed Check' }}
# Check with full table format
pcu -c

# Shows colored table with:
# - Package names
# - Current versions
# - Available versions
# - Update types (major/minor/patch)
# - Security indicators
```

</CodeGroup>

### Safe Updates with Backup

Update dependencies safely with automatic backups:

```bash
# Interactive updates with backup
pcu -i -b

# Or automated minor updates with backup
pcu -u --target minor --create-backup
```

### Target-Specific Updates

Update only specific types of changes:

<CodeGroup>

```bash {{ title: 'Conservative Updates' }}
# Only patch updates (bug fixes)
pcu -u --target patch

# Only minor updates (new features, no breaking changes)
pcu -u --target minor
```

```bash {{ title: 'Latest Everything' }}
# Update to latest versions (including major)
pcu -u --target latest

# Include prerelease versions
pcu -u --prerelease
```

</CodeGroup>

## Multi-Catalog Workspaces

### Legacy Support Scenario

Managing multiple React versions in one workspace:

<CodeGroup>

```yaml {{ title: 'pnpm-workspace.yaml' }}
packages:
  - "apps/*"
  - "packages/*"

catalog:
  # Default catalog - latest versions
  react: ^18.2.0
  react-dom: ^18.2.0
  @types/react: ^18.2.0

catalogs:
  # Legacy support
  react17:
    react: ^17.0.2
    react-dom: ^17.0.2
    @types/react: ^17.0.62

  # Beta testing
  react-next:
    react: ^19.0.0-beta
    react-dom: ^19.0.0-beta
```

```bash {{ title: 'Catalog-Specific Updates' }}
# Update only the default catalog
pcu -u --catalog default

# Update legacy React versions
pcu -u --catalog react17 --target minor

# Check beta versions
pcu -c --catalog react-next --prerelease
```

</CodeGroup>

### Package Usage

```json {{ title: 'package.json' }}
{
  "name": "@myorg/modern-app",
  "dependencies": {
    "react": "catalog:",
    "react-dom": "catalog:"
  }
}
```

```json {{ title: 'Legacy package.json' }}
{
  "name": "@myorg/legacy-app",
  "dependencies": {
    "react": "catalog:react17",
    "react-dom": "catalog:react17"
  }
}
```

## Configuration Examples

### React Ecosystem Management

Coordinated updates for React and related packages:

```json {{ title: '.pcurc.json' }}
{
  "packageRules": [
    {
      "patterns": ["react", "react-dom"],
      "target": "minor",
      "requireConfirmation": true,
      "relatedPackages": [
        "@types/react",
        "@types/react-dom",
        "react-router-dom",
        "@testing-library/react"
      ]
    }
  ],
  "security": {
    "autoFixVulnerabilities": true,
    "allowMajorForSecurity": true
  }
}
```

### TypeScript Project Configuration

Conservative TypeScript updates with automatic type definitions:

```json {{ title: '.pcurc.json' }}
{
  "packageRules": [
    {
      "patterns": ["typescript"],
      "target": "minor",
      "requireConfirmation": true
    },
    {
      "patterns": ["@types/*"],
      "target": "latest",
      "autoUpdate": true
    },
    {
      "patterns": ["eslint*", "@typescript-eslint/*"],
      "target": "minor",
      "groupUpdate": true
    }
  ]
}
```

### Enterprise Configuration

Enterprise-ready configuration with strict controls:

```json {{ title: '.pcurc.json' }}
{
  "defaults": {
    "target": "minor",
    "createBackup": true
  },
  "exclude": ["typescript", "@types/node", "react", "react-dom"],
  "security": {
    "autoFixVulnerabilities": true,
    "allowMajorForSecurity": true,
    "notifyOnSecurityUpdate": true
  },
  "advanced": {
    "concurrency": 3,
    "timeout": 60000,
    "retries": 5
  },
  "ui": {
    "theme": "minimal",
    "animations": false
  }
}
```

## CI/CD Integration

### GitHub Actions

Automate dependency checking in your CI pipeline:

<CodeGroup>

```yaml {{ title: '.github/workflows/dependencies.yml' }}
name: Check Dependencies

on:
  schedule:
    - cron: '0 9 * * MON'  # Every Monday at 9 AM
  workflow_dispatch:

jobs:
  check-deps:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install PCU
        run: npm install -g pnpm-catalog-updates

      - name: Check for updates
        run: pcu -c --format json > updates.json

      - name: Create Issue if Updates Available
        if: success()
        uses: actions/github-script@v7
        with:
          script: |
            const fs = require('fs');
            const updates = JSON.parse(fs.readFileSync('updates.json', 'utf8'));
            if (updates.length > 0) {
              github.rest.issues.create({
                owner: context.repo.owner,
                repo: context.repo.repo,
                title: 'Dependencies Update Available',
                body: `Found ${updates.length} packages that can be updated:

` +
                      updates.map(u => `- ${u.package}: ${u.current} → ${u.available}`).join('
')
              });
            }
```

```bash {{ title: 'Package.json Scripts' }}
# Add to your package.json
{
  "scripts": {
    "deps:check": "pcu -c",
    "deps:update": "pcu -i -b",
    "deps:update-minor": "pcu -u --target minor --create-backup",
    "deps:analyze": "pcu -a default"
  }
}
```

</CodeGroup>

## Error Handling and Troubleshooting

### Network Issues

Handle network problems and registry access:

```bash
# Increase timeout for slow connections
pcu -c --timeout 60000

# Reduce concurrency for unstable networks
pcu -u --concurrency 2
```

### Workspace Validation

Validate your workspace setup:

```bash
# Check workspace configuration
pcu -s --validate

# Get detailed workspace information
pcu -s --stats --verbose
```

### Private Registries

PCU automatically reads `.npmrc` and `.pnpmrc` configurations:

<CodeGroup>

```ini {{ title: '.npmrc' }}
@myorg:registry=https://npm.private-registry.com/
//npm.private-registry.com/:_authToken=${NPM_TOKEN}

registry=https://registry.npmjs.org/
```

```bash {{ title: 'Usage' }}
# PCU will automatically use your registry settings
pcu -c

# Check packages from private registry
pcu -c --include "@myorg/*"
```

</CodeGroup>

## Advanced Use Cases

### Impact Analysis

Analyze the impact of updating specific packages:

```bash
# Analyze React update impact
pcu -a default react

# Analyze with specific version
pcu -a default react 18.3.0

# Check impact across all catalogs
pcu -a react17 react 17.0.3
```

### Selective Updates

Update only specific packages or patterns:

```bash
# Update only React-related packages
pcu -u --include "react*"

# Update everything except core frameworks
pcu -u --exclude "react*,vue*,angular*"

# Update only type definitions
pcu -u --include "@types/*" --target latest
```

### Dry Run Analysis

Preview changes before applying them:

```bash
# See what would be updated
pcu -u --dry-run --verbose

# Preview with specific targets
pcu -u --dry-run --target minor --include "@types/*"
```

## Best Practices

### Daily Workflow

1. **Morning Check**: `pcu -c` to see available updates
2. **Review Impact**: Use `pcu -a` for significant updates
3. **Safe Update**: `pcu -i -b` for interactive updates with backup
4. **Test**: Run your test suite after updates
5. **Commit**: Commit dependency updates separately

### Team Workflow

1. **Shared Configuration**: Commit `.pcurc.json` to version control
2. **Regular Reviews**: Schedule weekly dependency review meetings
3. **Security Priority**: Always prioritize security updates
4. **Documentation**: Document major dependency decisions
5. **Rollback Plan**: Keep backups for easy rollback

### Release Workflow

1. **Pre-release Check**: `pcu -c --target patch` before releases
2. **Security Scan**: Enable `autoFixVulnerabilities` in CI
3. **Version Pinning**: Use exact versions for production releases
4. **Update Schedule**: Plan dependency updates between releases
