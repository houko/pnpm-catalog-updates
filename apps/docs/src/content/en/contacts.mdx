export const metadata = {
  title: 'Configuration',
  description:
    'Learn how to configure pnpm-catalog-updates for your workflow with .pcurc.json settings, package rules, and advanced options.',
};

# Configuration

Configure PCU to match your workflow and project needs. Learn about configuration files, package-specific rules, and advanced settings. {{ className: 'lead' }}

## Configuration File

PCU uses a `.pcurc.json` file in your project root for configuration. Create one manually or use `pcu init` to generate a default configuration.

<CodeGroup>

```json {{ title: 'Basic Configuration' }}
{
  "defaults": {
    "target": "latest",
    "timeout": 30000,
    "parallel": 5
  },
  "workspace": {
    "autoDiscover": true,
    "catalogMode": "strict"
  },
  "output": {
    "format": "table",
    "color": true,
    "verbose": false
  }
}
```

```json {{ title: 'Advanced Configuration' }}
{
  "defaults": {
    "target": "minor",
    "createBackup": true
  },
  "update": {
    "interactive": true,
    "dryRunFirst": true,
    "skipPrereleases": false
  },
  "ui": {
    "theme": "modern",
    "progressBars": true,
    "progressBarStyle": "gradient",
    "animations": true
  },
  "advanced": {
    "concurrency": 5,
    "timeout": 30000,
    "retries": 3,
    "cacheValidityMinutes": 60
  }
}
```

</CodeGroup>

## Package Filtering

Control which packages to update with include/exclude patterns and package-specific rules.

<CodeGroup>

```json {{ title: 'Simple Filtering' }}
{
  "exclude": ["typescript", "@types/node", "react", "react-dom"],
  "include": ["lodash*", "chalk", "commander"]
}
```

```json {{ title: 'Package Rules' }}
{
  "packageRules": [
    {
      "patterns": ["react", "react-dom"],
      "target": "minor",
      "requireConfirmation": true,
      "relatedPackages": ["@types/react", "@types/react-dom"]
    },
    {
      "patterns": ["@types/*"],
      "target": "latest",
      "autoUpdate": true
    },
    {
      "patterns": ["eslint*", "prettier"],
      "target": "minor",
      "groupUpdate": true
    }
  ]
}
```

</CodeGroup>

### Package Rule Properties

<Properties>
  <Property name="patterns" type="string[]" required>
    Glob patterns to match package names
  </Property>
  <Property name="target" type="enum">
    Update target: latest, greatest, minor, patch, newest
  </Property>
  <Property name="requireConfirmation" type="boolean">
    Always ask before updating these packages
  </Property>
  <Property name="autoUpdate" type="boolean">
    Update automatically without confirmation
  </Property>
  <Property name="relatedPackages" type="string[]">
    Packages that follow the same update strategy
  </Property>
  <Property name="groupUpdate" type="boolean">
    Update related packages together
  </Property>
</Properties>

## Security Configuration

Configure security vulnerability scanning and automatic fixes.

```json
{
  "security": {
    "autoFixVulnerabilities": true,
    "allowMajorForSecurity": true,
    "notifyOnSecurityUpdate": true
  }
}
```

<Properties>
  <Property name="autoFixVulnerabilities" type="boolean">
    Automatically check and fix security vulnerabilities
  </Property>
  <Property name="allowMajorForSecurity" type="boolean">
    Allow major version upgrades for security fixes
  </Property>
  <Property name="notifyOnSecurityUpdate" type="boolean">
    Show notifications on security updates
  </Property>
</Properties>

## Monorepo Configuration

Special settings for complex monorepo setups with multiple catalogs.

```json
{
  "monorepo": {
    "syncVersions": ["react", "react-dom"],
    "catalogPriority": ["default", "latest", "react17"]
  }
}
```

<Properties>
  <Property name="syncVersions" type="string[]">
    Packages that need version sync across multiple catalogs
  </Property>
  <Property name="catalogPriority" type="string[]">
    Catalog priority order for conflict resolution
  </Property>
</Properties>

## Advanced Settings

Fine-tune performance and behavior with advanced configuration options.

```json
{
  "advanced": {
    "concurrency": 5,
    "timeout": 30000,
    "retries": 3,
    "cacheValidityMinutes": 60,
    "checkForUpdates": true
  }
}
```

<Properties>
  <Property name="concurrency" type="number" default="5">
    Number of concurrent network requests
  </Property>
  <Property name="timeout" type="number" default="30000">
    Network request timeout in milliseconds
  </Property>
  <Property name="retries" type="number" default="3">
    Number of retries on failure
  </Property>
  <Property name="cacheValidityMinutes" type="number" default="60">
    Cache validity period (0 to disable caching)
  </Property>
  <Property name="checkForUpdates" type="boolean" default="true">
    Automatically check for PCU tool updates on startup. Skipped in CI environments. Shows update
    notifications and installation instructions when newer versions are available.
  </Property>
</Properties>

## UI Configuration

Customize the visual appearance and user interface settings.

```json
{
  "ui": {
    "theme": "modern",
    "progressBars": true,
    "progressBarStyle": "gradient",
    "animations": true
  },
  "output": {
    "format": "table",
    "color": true,
    "verbose": false
  }
}
```

### Available Themes

- `default` - Balanced colors for general use
- `modern` - Vibrant colors for development environments
- `minimal` - Clean and simple for production environments
- `neon` - High contrast colors for presentations

### Progress Bar Styles

PCU supports 6 different progress bar styles for enhanced visual feedback during operations:

- `default` - Standard progress bar with basic styling
- `gradient` - Gradient-colored progress bar for modern appearance
- `fancy` - Enhanced progress bar with decorative elements
- `minimal` - Clean and simple progress indicator
- `rainbow` - Multi-colored progress bar for vibrant displays
- `neon` - High-contrast progress bar matching neon theme

**Configuration Example:**

```json
{
  "ui": {
    "theme": "modern",
    "progressBars": true,
    "progressBarStyle": "gradient"
  }
}
```

**Command Line Usage:**

```bash
pcu check --progress-style fancy
pcu update --progress-style rainbow
pcu security --progress-style neon
```

## Configuration Priority

Configuration settings are applied in this priority order:

1. **Command line flags** (highest priority)
2. **Package-specific rules** in `.pcurc.json`
3. **General settings** in `.pcurc.json`
4. **Default values** (lowest priority)

<Note>
  Related packages automatically inherit settings from their parent package rules, ensuring version
  consistency across ecosystem packages.
</Note>

## Examples

### React Ecosystem

```json
{
  "packageRules": [
    {
      "patterns": ["react", "react-dom"],
      "target": "minor",
      "requireConfirmation": true,
      "relatedPackages": ["@types/react", "@types/react-dom", "react-router-dom"]
    }
  ]
}
```

### TypeScript Project

```json
{
  "packageRules": [
    {
      "patterns": ["typescript"],
      "target": "minor",
      "requireConfirmation": true
    },
    {
      "patterns": ["@types/*"],
      "target": "latest",
      "autoUpdate": true
    }
  ]
}
```

### Enterprise Setup

```json
{
  "defaults": {
    "target": "minor",
    "createBackup": true
  },
  "security": {
    "autoFixVulnerabilities": true,
    "allowMajorForSecurity": true
  },
  "ui": {
    "theme": "minimal",
    "progressBars": true,
    "progressBarStyle": "minimal"
  },
  "advanced": {
    "concurrency": 3,
    "timeout": 60000
  },
  "exclude": ["typescript", "@types/node", "react", "react-dom"]
}
```
