export const metadata = {
  title: '命令参考',
  description: '所有 pnpm-catalog-updates 命令、选项和使用模式的完整参考指南。',
};

# 命令参考

所有 PCU 命令和选项的完整参考。了解每个命令、标志和可用的配置选项。{{ className: 'lead' }}

## 命令概览

PCU 提供几个主要命令，既有全名也有便捷的简写：

| 完整命令        | 简写     | 描述                            |
| --------------- | -------- | ------------------------------- |
| `pcu init`      | `pcu i`  | 初始化 PNPM 工作空间和 PCU 配置 |
| `pcu check`     | `pcu -c` | 检查过时的目录依赖              |
| `pcu update`    | `pcu -u` | 更新目录依赖                    |
| `pcu analyze`   | `pcu -a` | 分析依赖更新的影响              |
| `pcu workspace` | `pcu -s` | 显示工作空间信息和验证          |
| `pcu theme`     | `pcu -t` | 配置颜色主题和 UI 设置          |
| `pcu help`      | `pcu -h` | 显示帮助信息                    |

---

## `pcu init` - 初始化工作空间

初始化完整的 PNPM 工作空间环境和 PCU 配置。

<CodeGroup>

```bash {{ title: '基本用法' }}
pcu init
pcu i
```

```bash {{ title: '带选项' }}
pcu init --force --verbose
pcu init --workspace ./my-project
pcu init --no-create-workspace
```

</CodeGroup>

### 选项

<Properties>
  <Property name="--force" type="boolean">
    覆盖现有配置文件
  </Property>
  <Property name="--create-workspace" type="boolean" default="true">
    如果缺失则创建 PNPM 工作空间结构
  </Property>
  <Property name="--no-create-workspace" type="boolean">
    跳过创建 PNPM 工作空间结构
  </Property>
  <Property name="-w, --workspace" type="string">
    工作空间目录（默认：当前目录）
  </Property>
  <Property name="-v, --verbose" type="boolean">
    显示详细信息
  </Property>
</Properties>

### 创建的文件

- `.pcurc.json` - PCU 配置文件，包含包规则和设置
- `package.json` - 工作空间根 package.json（如果缺失）
- `pnpm-workspace.yaml` - PNPM 工作空间配置（如果缺失）
- `packages/` - 工作空间包目录（如果缺失）

---

## `pcu check` - 检查更新

检查 pnpm 工作空间目录中的过时依赖。

<CodeGroup>

```bash {{ title: '基本检查' }}
pcu check
pcu -c
pcu chk
```

```bash {{ title: '高级用法' }}
pcu -c --format minimal
pcu check --catalog node18 --include "react*"
pcu -c --target minor --prerelease
```

</CodeGroup>

### 选项

<Properties>
  <Property name="--catalog" type="string">
    仅检查特定目录
  </Property>
  <Property name="-f, --format" type="enum" default="table">
    输出格式：table、json、yaml、minimal
  </Property>
  <Property name="-t, --target" type="enum" default="latest">
    更新目标：latest、greatest、minor、patch、newest
  </Property>
  <Property name="--prerelease" type="boolean">
    包含预发布版本
  </Property>
  <Property name="--include" type="string">
    包含匹配模式的包
  </Property>
  <Property name="--exclude" type="string">
    排除匹配模式的包
  </Property>
</Properties>

### 输出格式

- **table**：带颜色和详细信息的丰富表格格式
- **minimal**：简单的 npm-check-updates 风格（package → version）
- **json**：用于程序化使用的 JSON 输出
- **yaml**：用于配置文件的 YAML 输出

---

## `pcu update` - 更新依赖

将目录依赖更新到新版本。

<CodeGroup>

```bash {{ title: '交互式更新' }}
pcu update --interactive
pcu -u -i
```

```bash {{ title: '自动更新' }}
pcu -u --target minor --create-backup
pcu update --dry-run --verbose
```

</CodeGroup>

### 选项

<Properties>
  <Property name="-i, --interactive" type="boolean">
    交互模式选择更新
  </Property>
  <Property name="-d, --dry-run" type="boolean">
    预览更改而不写入文件
  </Property>
  <Property name="-t, --target" type="enum" default="latest">
    更新目标：latest、greatest、minor、patch、newest
  </Property>
  <Property name="--catalog" type="string">
    仅更新特定目录
  </Property>
  <Property name="--force" type="boolean">
    即使有风险也强制更新
  </Property>
  <Property name="-b, --create-backup" type="boolean">
    更新前创建备份文件
  </Property>
</Properties>

---

## `pcu analyze` - 影响分析

分析更新特定依赖的影响。

<CodeGroup>

```bash {{ title: '基本分析' }}
pcu analyze default react
pcu a default react 18.3.0
pcu -a react17 @types/react
```

</CodeGroup>

### 参数

<Properties>
  <Property name="catalog" type="string" required>
    目录名称（例如，'default'、'react17'）
  </Property>
  <Property name="package" type="string" required>
    包名称（例如，'react'、'@types/node'）
  </Property>
  <Property name="version" type="string">
    新版本（可选，默认为最新）
  </Property>
</Properties>

---

## `pcu workspace` - 工作空间信息

显示工作空间信息和验证。

<CodeGroup>

```bash {{ title: '基本信息' }}
pcu workspace
pcu -s
```

```bash {{ title: '带验证' }}
pcu -s --validate --stats
```

</CodeGroup>

### 选项

<Properties>
  <Property name="--validate" type="boolean">
    验证工作空间配置
  </Property>
  <Property name="-s, --stats" type="boolean">
    显示工作空间统计信息
  </Property>
</Properties>

---

## `pcu theme` - 主题配置

配置颜色主题和 UI 外观。

<CodeGroup>

```bash {{ title: '主题管理' }}
pcu theme --list
pcu -t --set modern
pcu theme --interactive
```

</CodeGroup>

### 选项

<Properties>
  <Property name="-s, --set" type="string">
    设置颜色主题：default, modern, minimal, neon
  </Property>
  <Property name="-l, --list" type="boolean">
    列出所有可用主题
  </Property>
  <Property name="-i, --interactive" type="boolean">
    启动交互式主题配置向导，提供引导式设置
  </Property>
</Properties>

### 可用主题

- `default` - 通用使用的平衡颜色
- `modern` - 开发环境的活泼颜色
- `minimal` - 生产环境的简洁风格
- `neon` - 演示的高对比度颜色

### 使用示例

#### 列出可用主题

```bash
pcu theme --list
```

显示所有可用主题及其描述。

#### 直接设置主题

```bash
pcu theme --set modern
pcu -t --set neon
```

直接设置指定主题。

#### 交互式主题配置

```bash
pcu theme --interactive
pcu -t -i
```

启动引导式主题选择向导，允许您预览主题并交互式配置 UI 设置。

---

## 全局选项

这些选项适用于所有命令：

<Properties>
  <Property name="-w, --workspace" type="string">
    工作空间目录路径
  </Property>
  <Property name="-v, --verbose" type="boolean">
    启用详细日志记录
  </Property>
  <Property name="--no-color" type="boolean">
    禁用彩色输出
  </Property>
  <Property name="-V, --version" type="boolean">
    输出版本号
  </Property>
  <Property name="-h, --help" type="boolean">
    显示命令帮助
  </Property>
</Properties>
