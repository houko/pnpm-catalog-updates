export const metadata = {
  title: 'æ•…éšœæ’é™¤',
  description:
    'ä½¿ç”¨ pnpm-catalog-updates æ—¶çš„å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚é”™è¯¯æ¶ˆæ¯ã€è°ƒè¯•æŠ€å·§å’Œæ•…éšœæ’é™¤æŒ‡å—ã€‚',
};

# æ•…éšœæ’é™¤

å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©æ‚¨è§£å†³ PCU çš„é—®é¢˜ã€‚æŸ¥æ‰¾å¸¸è§é”™è¯¯çš„ç­”æ¡ˆå’Œè°ƒè¯•æŠ€å·§ã€‚{{ className: 'lead' }}

## å¸¸è§é”™è¯¯

### æœªæ‰¾åˆ°å·¥ä½œç©ºé—´

**é”™è¯¯æ¶ˆæ¯ï¼š**

```
Error: No pnpm workspace found in the current directory
```

**åŸå› ï¼š** PCU æ— æ³•æ‰¾åˆ° `pnpm-workspace.yaml` æ–‡ä»¶æˆ–æ£€æµ‹åˆ°æœ‰æ•ˆçš„ pnpm å·¥ä½œç©ºé—´ç»“æ„ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

<CodeGroup>

```bash {{ title: 'åˆå§‹åŒ–å·¥ä½œç©ºé—´' }}
# åˆ›å»ºæ–°çš„ pnpm å·¥ä½œç©ºé—´
pcu init

# æˆ–æ‰‹åŠ¨åˆ›å»º pnpm-workspace.yaml
echo "packages:
  - 'packages/*'" > pnpm-workspace.yaml
```

```bash {{ title: 'æŒ‡å®šå·¥ä½œç©ºé—´è·¯å¾„' }}
# ä»å·¥ä½œç©ºé—´æ ¹ç›®å½•è¿è¡Œ PCU
cd /path/to/workspace/root
pcu -c

# æˆ–æŒ‡å®šå·¥ä½œç©ºé—´ç›®å½•
pcu -c --workspace /path/to/workspace
```

</CodeGroup>

---

### æ— ç›®å½•ä¾èµ–

**é”™è¯¯æ¶ˆæ¯ï¼š**

```
No catalog dependencies found in workspace
```

**åŸå› ï¼š** æ‚¨çš„å·¥ä½œç©ºé—´æœªä½¿ç”¨ pnpm ç›®å½•ä¾èµ–ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

<CodeGroup>

```yaml {{ title: 'å‘ pnpm-workspace.yaml æ·»åŠ ç›®å½•' }}
packages:
  - 'packages/*'

catalog:
  react: ^18.2.0
  typescript: ^5.0.0
  lodash: ^4.17.21
```

```json {{ title: 'åœ¨ package.json ä¸­ä½¿ç”¨ç›®å½•' }}
{
  "name": "my-package",
  "dependencies": {
    "react": "catalog:",
    "typescript": "catalog:",
    "lodash": "catalog:"
  }
}
```

</CodeGroup>

---

### æ³¨å†Œè¡¨è®¿é—®é—®é¢˜

**é”™è¯¯æ¶ˆæ¯ï¼š**

```
Error: getaddrinfo ENOTFOUND registry.npmjs.org
```

**åŸå› ï¼š** ç½‘ç»œè¿æ¥é—®é¢˜æˆ–æ³¨å†Œè¡¨è®¿é—®é—®é¢˜ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

<CodeGroup>

```bash {{ title: 'ç½‘ç»œæ•…éšœæ’é™¤' }}
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping registry.npmjs.org

# ä½¿ç”¨å¢åŠ çš„è¶…æ—¶æµ‹è¯•
pcu -c --timeout 60000

# å‡å°‘å¹¶å‘è¯·æ±‚
pcu -c --concurrency 2
```

```ini {{ title: 'é…ç½®æ³¨å†Œè¡¨ (.npmrc)' }}
# ä½¿ç”¨ä¸åŒæ³¨å†Œè¡¨
registry=https://registry.npmjs.org/

# ä¼ä¸šç½‘ç»œ
registry=https://your-corporate-registry.com/
strict-ssl=false
```

</CodeGroup>

---

### èº«ä»½éªŒè¯é”™è¯¯

**é”™è¯¯æ¶ˆæ¯ï¼š**

```
Error: 401 Unauthorized - authentication required
```

**åŸå› ï¼š** ç§æœ‰æ³¨å†Œè¡¨ç¼ºå°‘æˆ–æ— æ•ˆçš„èº«ä»½éªŒè¯ä»¤ç‰Œã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

<CodeGroup>

```ini {{ title: 'é…ç½®èº«ä»½éªŒè¯ (.npmrc)' }}
@myorg:registry=https://npm.private-registry.com/
//npm.private-registry.com/:_authToken=${NPM_TOKEN}

# æˆ–ä½¿ç”¨ä¼ ç»Ÿèº«ä»½éªŒè¯
//npm.private-registry.com/:username=myuser
//npm.private-registry.com/:_password=base64password
//npm.private-registry.com/:email=my.email@example.com
```

```bash {{ title: 'è®¾ç½®ç¯å¢ƒå˜é‡' }}
export NPM_TOKEN=your_token_here
pcu -c
```

</CodeGroup>

---

### é…ç½®æ–‡ä»¶é”™è¯¯

**é”™è¯¯æ¶ˆæ¯ï¼š**

```
Error: Invalid configuration in .pcurc.json
```

**åŸå› ï¼š** JSON æ ¼å¼é”™è¯¯æˆ–æ— æ•ˆé…ç½®é€‰é¡¹ã€‚

**è§£å†³æ–¹æ¡ˆï¼š**

<CodeGroup>

```bash {{ title: 'éªŒè¯é…ç½®' }}
# æ£€æŸ¥ JSON è¯­æ³•
node -e "console.log(JSON.parse(require('fs').readFileSync('.pcurc.json', 'utf8')))"

# é‡æ–°ç”Ÿæˆé…ç½®
mv .pcurc.json .pcurc.json.backup
pcu init --force
```

```json {{ title: 'æœ€å°æœ‰æ•ˆé…ç½®' }}
{
  "defaults": {
    "target": "latest"
  },
  "output": {
    "format": "table"
  }
}
```

</CodeGroup>

## è°ƒè¯•

### å¯ç”¨è¯¦ç»†æ—¥å¿—

<CodeGroup>

```bash {{ title: 'è¯¦ç»†è¾“å‡º' }}
# å¯ç”¨è¯¦ç»†æ—¥å¿—
pcu -c --verbose

# ä½¿ç”¨ç¯å¢ƒå˜é‡è°ƒè¯•æ¨¡å¼
DEBUG=pcu:* pcu -c

# ç‰¹å®šè°ƒè¯•æ¨¡å—
DEBUG=pcu:core,pcu:registry pcu -c
```

```bash {{ title: 'è¾“å‡ºåˆ°æ–‡ä»¶' }}
# ä¿å­˜è°ƒè¯•è¾“å‡º
pcu -c --verbose > debug.log 2>&1

# æ£€æŸ¥æ—¥å¿—æ–‡ä»¶
cat debug.log | grep -i error
```

</CodeGroup>

### å·¥ä½œç©ºé—´éªŒè¯

<CodeGroup>

```bash {{ title: 'éªŒè¯å·¥ä½œç©ºé—´' }}
# æ£€æŸ¥å·¥ä½œç©ºé—´é…ç½®
pcu -s --validate

# è·å–è¯¦ç»†å·¥ä½œç©ºé—´ä¿¡æ¯
pcu -s --stats --verbose
```

```bash {{ title: 'æ‰‹åŠ¨éªŒè¯' }}
# æ£€æŸ¥ pnpm-workspace.yaml æ˜¯å¦å­˜åœ¨
ls -la pnpm-workspace.yaml

# éªŒè¯ç›®å½•è¯­æ³•
pnpm exec -- pnpm list --depth=0
```

</CodeGroup>

## æ€§èƒ½é—®é¢˜

### ç½‘ç»œè¯·æ±‚ç¼“æ…¢

**ç—‡çŠ¶ï¼š** PCU æ£€æŸ¥æ›´æ–°éœ€è¦å¾ˆé•¿æ—¶é—´

**è§£å†³æ–¹æ¡ˆï¼š**

<CodeGroup>

```json {{ title: 'ä¼˜åŒ–é…ç½®' }}
{
  "advanced": {
    "concurrency": 3,
    "timeout": 30000,
    "retries": 2,
    "cacheValidityMinutes": 120
  }
}
```

```bash {{ title: 'ç¼“å­˜ç®¡ç†' }}
# å¦‚æœç¼“å­˜è¿‡æ—¶åˆ™æ¸…é™¤
rm -rf ~/.pcu/cache

# ç¦ç”¨ç¼“å­˜ç”¨äºè°ƒè¯•
pcu -c --no-cache
```

</CodeGroup>

### é«˜å†…å­˜ä½¿ç”¨

**ç—‡çŠ¶ï¼š** PCU åœ¨å¤§å‹å·¥ä½œç©ºé—´ä¸­æ¶ˆè€—è¿‡å¤šå†…å­˜

**è§£å†³æ–¹æ¡ˆï¼š**

<CodeGroup>

```json {{ title: 'å†…å­˜ä¼˜åŒ–' }}
{
  "advanced": {
    "concurrency": 2,
    "batchSize": 10
  }
}
```

```bash {{ title: 'è¿›ç¨‹ç®¡ç†' }}
# ç›‘æ§å†…å­˜ä½¿ç”¨
top -p $(pgrep node)

# ä½¿ç”¨ Node.js å†…å­˜æ ‡å¿—
node --max-old-space-size=4096 $(which pcu) -c
```

</CodeGroup>

## ç¯å¢ƒé—®é¢˜

### Node.js ç‰ˆæœ¬å…¼å®¹æ€§

**é”™è¯¯æ¶ˆæ¯ï¼š**

```
Error: Unsupported Node.js version
```

**è§£å†³æ–¹æ¡ˆï¼š**

<CodeGroup>

```bash {{ title: 'æ£€æŸ¥ç‰ˆæœ¬' }}
node --version  # åº”è¯¥æ˜¯ >= 18.0.0

# å®‰è£…å…¼å®¹ç‰ˆæœ¬
nvm install 20
nvm use 20
```

```bash {{ title: 'æ›´æ–° Node.js' }}
# ä½¿ç”¨ nvm
nvm install --lts
nvm use --lts

# éªŒè¯å®‰è£…
node --version
npm --version
```

</CodeGroup>

### pnpm ç‰ˆæœ¬é—®é¢˜

**é”™è¯¯æ¶ˆæ¯ï¼š**

```
Error: pnpm command not found
```

**è§£å†³æ–¹æ¡ˆï¼š**

<CodeGroup>

```bash {{ title: 'å®‰è£… pnpm' }}
# å®‰è£…æœ€æ–° pnpm
npm install -g pnpm@latest

# éªŒè¯å®‰è£…
pnpm --version  # åº”è¯¥æ˜¯ >= 8.0.0
```

```bash {{ title: 'æ›¿ä»£å®‰è£…' }}
# ä½¿ç”¨ Corepackï¼ˆæ¨èï¼‰
corepack enable
corepack prepare pnpm@latest --activate

# ç›´æ¥ä¸‹è½½
curl -fsSL https://get.pnpm.io/install.sh | sh -
```

</CodeGroup>

## Windows ç‰¹å®šé—®é¢˜

### è·¯å¾„åˆ†éš”ç¬¦é—®é¢˜

**é”™è¯¯æ¶ˆæ¯ï¼š**

```
Error: Cannot resolve workspace path
```

**è§£å†³æ–¹æ¡ˆï¼š**

<CodeGroup>

```bash {{ title: 'ä½¿ç”¨æ­£æ–œæ ' }}
# åœ¨è·¯å¾„ä¸­ä½¿ç”¨æ­£æ–œæ 
pcu -c --workspace ./my/workspace

# æˆ–ä½¿ç”¨ PowerShell
pwsh -c "pcu -c"
```

```json {{ title: 'Windows é…ç½®' }}
{
  "workspace": {
    "pathSeparator": "/"
  }
}
```

</CodeGroup>

### æƒé™é”™è¯¯

**é”™è¯¯æ¶ˆæ¯ï¼š**

```
Error: EPERM: operation not permitted
```

**è§£å†³æ–¹æ¡ˆï¼š**

<CodeGroup>

```cmd {{ title: 'ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ' }}
# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦
runas /user:Administrator cmd

# æˆ–ä»¥ç®¡ç†å‘˜èº«ä»½ä½¿ç”¨ PowerShell
Start-Process powershell -Verb RunAs
```

```bash {{ title: 'ä¿®å¤æƒé™' }}
# ä¿®å¤ npm æƒé™
npm config set cache ~/.npm-cache
npm config set prefix ~/npm-global
```

</CodeGroup>

## è·å–å¸®åŠ©

### è¯Šæ–­ä¿¡æ¯

æŠ¥å‘Šé—®é¢˜æ—¶ï¼Œè¯·åŒ…å«æ­¤è¯Šæ–­ä¿¡æ¯ï¼š

<CodeGroup>

```bash {{ title: 'ç³»ç»Ÿä¿¡æ¯' }}
# PCU ç‰ˆæœ¬
pcu --version

# Node.js å’Œ pnpm ç‰ˆæœ¬
node --version
pnpm --version

# æ“ä½œç³»ç»Ÿ
uname -a  # Linux/macOS
systeminfo  # Windows
```

```bash {{ title: 'é…ç½®ä¿¡æ¯' }}
# æ˜¾ç¤ºå½“å‰é…ç½®
cat .pcurc.json

# å·¥ä½œç©ºé—´éªŒè¯
pcu -s --validate --verbose

# è°ƒè¯•è¾“å‡º
DEBUG=pcu:* pcu -c --verbose
```

</CodeGroup>

### æ”¯æŒæ¸ é“

- ğŸ› **é”™è¯¯æŠ¥å‘Š**ï¼š[GitHub Issues](https://github.com/houko/pnpm-catalog-updates/issues)
- ğŸ’¬ **é—®é¢˜**ï¼š[GitHub Discussions](https://github.com/houko/pnpm-catalog-updates/discussions)
- ğŸ“– **æ–‡æ¡£**ï¼šæŸ¥çœ‹æ­¤æ–‡æ¡£è·å–è¯¦ç»†æŒ‡å—
- ğŸ”§ **åŠŸèƒ½è¯·æ±‚**ï¼šä½¿ç”¨å¸¦å¢å¼ºæ ‡ç­¾çš„ GitHub Issues

### é—®é¢˜æ¨¡æ¿

æŠ¥å‘Šé”™è¯¯æ—¶ï¼Œè¯·åŒ…å«ï¼š

1. **PCU ç‰ˆæœ¬**å’Œ**ä½¿ç”¨çš„å‘½ä»¤**
2. **é”™è¯¯æ¶ˆæ¯**ï¼ˆå¸¦ `--verbose` çš„å®Œæ•´è¾“å‡ºï¼‰
3. **ç¯å¢ƒ**ï¼ˆæ“ä½œç³»ç»Ÿã€Node.jsã€pnpm ç‰ˆæœ¬ï¼‰
4. **å·¥ä½œç©ºé—´ç»“æ„**ï¼ˆpnpm-workspace.yamlã€package.jsonï¼‰
5. **é…ç½®**ï¼ˆ.pcurc.jsonã€.npmrc å¦‚æœç›¸å…³ï¼‰
6. **é‡ç°é—®é¢˜çš„æ­¥éª¤**
7. **é¢„æœŸä¸å®é™…è¡Œä¸º**
