export const metadata = {
  title: 'ä¾‹',
  description:
    'pnpm-catalog-updates ã®å®Ÿéš›ã®ä¾‹ã¨ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã€‚å®Ÿéš›ã®ã‚·ãƒŠãƒªã‚ªã¨ä¸€èˆ¬çš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‹ã‚‰å­¦ç¿’ã—ã¾ã™ã€‚',
};

# ä¾‹

PCUã‚’æœ€å¤§é™ã«æ´»ç”¨ã™ã‚‹ãŸã‚ã®å®Ÿéš›ã®ä¾‹ã¨ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã€‚ã‚·ãƒ³ãƒ—ãƒ«ãªæ›´æ–°ã‹ã‚‰è¤‡é›‘ãªmonorepoç®¡ç†ã¾ã§ã€‚{{ className: 'lead' }}

## åˆå¿ƒè€…å®Œå…¨ã‚¬ã‚¤ãƒ‰

### ç¬¬ä¸€æ­©ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã®ç¢ºèª

PCUã‚’ä½¿ã„å§‹ã‚ã‚‹å‰ã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ï¼š

<CodeGroup>

```bash {{ title: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã®ç¢ºèª' }}
# pnpmãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
ls -la | grep -E "(pnpm-workspace|pnpm-lock)"

# ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ï¼š
# pnpm-workspace.yaml
# pnpm-lock.yaml
```

```bash {{ title: 'ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®šã®ç¢ºèª' }}
# ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®šã‚’ç¢ºèª
cat pnpm-workspace.yaml

# å…¸å‹çš„ãªå‡ºåŠ›ï¼š
# packages:
#   - "apps/*"
#   - "packages/*"
```

</CodeGroup>

ã¾ã pnpmãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãŒãªã„å ´åˆã€PCUãŒä½œæˆã‚’ãŠæ‰‹ä¼ã„ã—ã¾ã™ï¼š

```bash
# å®Œå…¨ãªpnpmãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¨PCUè¨­å®šã‚’åˆæœŸåŒ–
pcu init

# PCUãŒä½œæˆã™ã‚‹ã‚‚ã®ï¼š
# âœ… pnpm-workspace.yamlï¼ˆãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®šï¼‰
# âœ… .pcurc.jsonï¼ˆPCUè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
# âœ… packages/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆå­˜åœ¨ã—ãªã„å ´åˆï¼‰
```

### ç¬¬äºŒæ­©ï¼šåˆå›ã®ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã©ã®ä¾å­˜é–¢ä¿‚ãŒæ›´æ–°å¯èƒ½ã‹ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ï¼š

<CodeGroup>

```bash {{ title: 'ã‚·ãƒ³ãƒ—ãƒ«ãƒã‚§ãƒƒã‚¯' }}
# æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªãƒã‚§ãƒƒã‚¯ã‚³ãƒãƒ³ãƒ‰
pcu check

# ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ†ãƒ¼ãƒ–ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ Package         â”‚ Current â”‚ Available â”‚ Type       â”‚ Security â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ react           â”‚ 18.2.0  â”‚ 18.3.1  â”‚ minor     â”‚ âœ…       â”‚
# â”‚ typescript      â”‚ 5.0.4   â”‚ 5.2.2   â”‚ minor     â”‚ âœ…       â”‚
# â”‚ @types/node     â”‚ 18.15.13â”‚ 20.8.4  â”‚ major     â”‚ âœ…       â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```bash {{ title: 'å‡ºåŠ›ã®ç†è§£' }}
# ãƒ†ãƒ¼ãƒ–ãƒ«ã®æƒ…å ±ã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ï¼š

# Packageï¼šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å
# Currentï¼šç¾åœ¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³
# Availableï¼šåˆ©ç”¨å¯èƒ½ãªæ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³
# Typeï¼šæ›´æ–°ã‚¿ã‚¤ãƒ—
#   - patchï¼šãƒã‚°ä¿®æ­£ï¼ˆ1.0.1 â†’ 1.0.2ï¼‰
#   - minorï¼šæ–°æ©Ÿèƒ½ã€ç ´å£Šçš„å¤‰æ›´ãªã—ï¼ˆ1.0.0 â†’ 1.1.0ï¼‰
#   - majorï¼šç ´å£Šçš„å¤‰æ›´ã‚’å«ã‚€å¯èƒ½æ€§ï¼ˆ1.0.0 â†’ 2.0.0ï¼‰
# Securityï¼šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã®æœ‰ç„¡ âš ï¸ = ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã‚ã‚Šã€âœ… = å®‰å…¨
```

</CodeGroup>

### ç¬¬ä¸‰æ­©ï¼šåˆå›ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ›´æ–°

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¯å¸¸ã«æœ€å„ªå…ˆã§ã™ã€‚ã¾ãšã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã‚’å‡¦ç†ã—ã¾ã—ã‚‡ã†ï¼š

<CodeGroup>

```bash {{ title: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã®ãƒã‚§ãƒƒã‚¯' }}
# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã‚’å°‚é–€çš„ã«ãƒã‚§ãƒƒã‚¯
pcu security

# è„†å¼±æ€§ãŒã‚ã‚‹å ´åˆã€ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š
# ğŸš¨ 3å€‹ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã‚’ç™ºè¦‹
#
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ Package     â”‚ Severityâ”‚ Current  â”‚ Patched     â”‚ Vulnerabilityâ”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ lodash      â”‚ High    â”‚ 4.17.20  â”‚ 4.17.21     â”‚ CVE-2021-23337â”‚
# â”‚ node-fetch  â”‚ Moderateâ”‚ 2.6.1    â”‚ 2.6.7       â”‚ CVE-2022-0235â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```bash {{ title: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã®è‡ªå‹•ä¿®æ­£' }}
# PCUãŒã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã‚’è‡ªå‹•ä¿®æ­£
pcu security --fix-vulns

# PCUãŒè¡Œã†ã“ã¨ï¼š
# 1. ã™ã¹ã¦ã®ä¾å­˜é–¢ä¿‚ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã‚’ã‚¹ã‚­ãƒ£ãƒ³
# 2. ä¿®æ­£ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«è‡ªå‹•æ›´æ–°
# 3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¤œè¨¼ã‚’å®Ÿè¡Œ
# âœ… 3å€‹ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã‚’ä¿®æ­£
# âœ… ä»–ã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œãªã—
```

</CodeGroup>

### ç¬¬å››æ­©ï¼šåˆå›ã®ä¾å­˜é–¢ä¿‚æ›´æ–°

ã§ã¯ã€ã„ãã¤ã‹ã®ä¾å­˜é–¢ä¿‚ã‚’å®‰å…¨ã«æ›´æ–°ã—ã¾ã—ã‚‡ã†ã€‚ä¿å®ˆçš„ãªæ–¹æ³•ã‹ã‚‰å§‹ã‚ã¾ã™ï¼š

<CodeGroup>

```bash {{ title: 'ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ›´æ–°ï¼ˆåˆå¿ƒè€…æ¨å¥¨ï¼‰' }}
# ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ›´æ–° - ã©ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ›´æ–°ã™ã‚‹ã‹é¸æŠã§ãã¾ã™
pcu update --interactive

# PCUãŒé¸æŠãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºï¼š
# ? æ›´æ–°ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é¸æŠï¼š
# â—¯ react (18.2.0 â†’ 18.3.1) [minor]
# â—‰ typescript (5.0.4 â†’ 5.2.2) [minor]
# â—¯ @types/node (18.15.13 â†’ 20.8.4) [major] âš ï¸
# â—¯ eslint (8.42.0 â†’ 8.50.0) [minor]
#
# çŸ¢å°ã‚­ãƒ¼ã§ç§»å‹•ã€ã‚¹ãƒšãƒ¼ã‚¹ã§é¸æŠã€ã‚¨ãƒ³ã‚¿ãƒ¼ã§ç¢ºå®š
```

```bash {{ title: 'è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ' }}
# æ›´æ–°å‰ã«PCUãŒãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆ
pcu update --interactive --create-backup

# PCUãŒè¡Œã†ã“ã¨ï¼š
# 1. æ›´æ–°å‰ã« pnpm-workspace.yaml.backup ã‚’ä½œæˆ
# 2. æ›´æ–°ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é¸æŠã•ã›ã‚‹
# 3. æ›´æ–°ã‚’é©ç”¨
# 4. æ›´æ–°æˆåŠŸã‚’æ¤œè¨¼

# å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã€å¾©å…ƒã§ãã¾ã™ï¼š
# cp pnpm-workspace.yaml.backup pnpm-workspace.yaml
```

</CodeGroup>

### ç¬¬äº”æ­©ï¼šæ›´æ–°çµæœã®æ¤œè¨¼

æ›´æ–°å¾Œã€ã™ã¹ã¦ãŒæ­£å¸¸ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ï¼š

<CodeGroup>

```bash {{ title: 'ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®æ¤œè¨¼' }}
# ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
pcu workspace --validate

# å‡ºåŠ›ã§ã¯ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ï¼š
# âœ… ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®šãŒæœ‰åŠ¹
# âœ… ã™ã¹ã¦ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒãƒ¬ã‚¸ã‚¹ãƒˆãƒªã«å­˜åœ¨
# âœ… ãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ¶ç´„ãŒä¸€è‡´
# âœ… å¾ªç’°ä¾å­˜ãªã—
```

```bash {{ title: 'ä¾å­˜é–¢ä¿‚ã®å†ãƒã‚§ãƒƒã‚¯' }}
# æ›´æ–°ãŒé©ç”¨ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèª
pcu check

# æ›´æ–°å¯èƒ½ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå°‘ãªããªã£ã¦ã„ã‚‹ã‹
# "âœ… ã™ã¹ã¦ã®ä¾å­˜é–¢ä¿‚ãŒæœ€æ–°" ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™
```

</CodeGroup>

### ã‚ˆãã‚ã‚‹åˆå¿ƒè€…ã®ãƒŸã‚¹ã¨å›é¿æ–¹æ³•

#### ãƒŸã‚¹1ï¼šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãªã—ã§æ›´æ–°

**âŒ é–“é•ã£ãŸæ–¹æ³•ï¼š**

```bash
pcu update --target latest  # å±é™ºï¼ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãªã—
```

**âœ… æ­£ã—ã„æ–¹æ³•ï¼š**

```bash
pcu update --interactive --create-backup  # å®‰å…¨ï¼ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚ã‚Š
```

#### ãƒŸã‚¹2ï¼šç›´æ¥ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°

**âŒ é–“é•ã£ãŸæ–¹æ³•ï¼š**

```bash
pcu update --target latest  # ç ´å£Šçš„å¤‰æ›´ã‚’å«ã‚€å¯èƒ½æ€§
```

**âœ… æ­£ã—ã„æ–¹æ³•ï¼š**

```bash
# æœ€åˆã«ä½•ãŒæ›´æ–°ã•ã‚Œã‚‹ã‹ãƒã‚§ãƒƒã‚¯
pcu check

# å®‰å…¨ãªãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰é–‹å§‹
pcu update --target minor --create-backup

# ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ã¯ç‰¹ã«æ³¨æ„
pcu update --interactive  # ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ã‚’æ‰‹å‹•é¸æŠ
```

#### ãƒŸã‚¹3ï¼šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ã®ç„¡è¦–

**âŒ é–“é•ã£ãŸæ–¹æ³•ï¼š**

```bash
pcu update  # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã‚’æ®‹ã™ã‹ã‚‚ã—ã‚Œãªã„
```

**âœ… æ­£ã—ã„æ–¹æ³•ï¼š**

```bash
# æœ€åˆã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã‚’ä¿®æ­£
pcu security --fix-vulns

# ãã®å¾Œé€šå¸¸ã®æ›´æ–°ã‚’å®Ÿè¡Œ
pcu update --target minor
```

### åˆå¿ƒè€…ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

ã“ã®ã‚·ãƒ³ãƒ—ãƒ«ãªæ—¥å¸¸ç¿’æ…£ã‚’èº«ã«ã¤ã‘ã¾ã—ã‚‡ã†ï¼š

<CodeGroup>

```bash {{ title: 'æ¯æ—¥ã®ãƒã‚§ãƒƒã‚¯ï¼ˆ2åˆ†ï¼‰' }}
# 1. åˆ©ç”¨å¯èƒ½ãªæ›´æ–°ã‚’ç´ æ—©ãç¢ºèª
pcu check --format minimal

# 2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡ŒãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
pcu security

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡ŒãŒã‚ã‚‹å ´åˆã€ã™ãã«ä¿®æ­£ï¼š
pcu security --fix-vulns
```

```bash {{ title: 'é€±æ¬¡æ›´æ–°ï¼ˆ10åˆ†ï¼‰' }}
# 1. ã™ã¹ã¦ã®åˆ©ç”¨å¯èƒ½ãªæ›´æ–°ã‚’ãƒã‚§ãƒƒã‚¯
pcu check

# 2. ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ›´æ–°ï¼ˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä»˜ãï¼‰
pcu update --interactive --create-backup

# 3. ã™ã¹ã¦ãŒæ­£å¸¸ã§ã‚ã‚‹ã“ã¨ã‚’æ¤œè¨¼
pcu workspace --validate

# 4. ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test  # ã¾ãŸã¯ pnpm test
```

</CodeGroup>

### å®Ÿéš›ã®ã‚·ãƒŠãƒªã‚ªï¼šåˆå›ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

åˆå¿ƒè€…ã®ç”°ä¸­ã•ã‚“ã®åˆå›PCUä½“é¨“ã‚’è¿½ã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

<CodeGroup>

```bash {{ title: 'ç”°ä¸­ã•ã‚“ã®Reactãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ' }}
# ç”°ä¸­ã•ã‚“ãŒReactãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒã£ã¦ãŠã‚Šã€ä¾å­˜é–¢ä¿‚ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã‚‚ã‚‰ã„ã¾ã—ã‚‡ã†

# ç¬¬ä¸€æ­©ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã‚’ç¢ºèª
ls -la
# pnpm-lock.yaml ã¯ã‚ã‚‹ãŒ pnpm-workspace.yaml ãŒãªã„

# ç¬¬äºŒæ­©ï¼šPCUã‚’åˆæœŸåŒ–
pcu init
# âœ… pnpm-workspace.yaml ã‚’ä½œæˆ
# âœ… .pcurc.json ã‚’ä½œæˆ
# âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚«ã‚¿ãƒ­ã‚°ä¾å­˜é–¢ä¿‚ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼
```

```bash {{ title: 'åˆå›ãƒã‚§ãƒƒã‚¯' }}
# ç¬¬ä¸‰æ­©ï¼šæ›´æ–°å¯èƒ½ãªä¾å­˜é–¢ä¿‚ã‚’ãƒã‚§ãƒƒã‚¯
pcu check

# ç”°ä¸­ã•ã‚“ãŒè¦‹ãŸã‚‚ã®ï¼š
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ Package         â”‚ Current â”‚ Available â”‚ Type       â”‚ Security â”‚
# â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
# â”‚ react           â”‚ 18.0.0  â”‚ 18.3.1  â”‚ minor     â”‚ âœ…       â”‚
# â”‚ lodash          â”‚ 4.17.20 â”‚ 4.17.21 â”‚ patch     â”‚ âš ï¸       â”‚
# â”‚ @types/react    â”‚ 18.0.0  â”‚ 18.2.25 â”‚ minor     â”‚ âœ…       â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# lodashã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡ŒãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ï¼
```

```bash {{ title: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã®ä¿®æ­£' }}
# ç¬¬å››æ­©ï¼šæœ€åˆã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã‚’ä¿®æ­£
pcu security --fix-vulns

# âœ… lodashã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã‚’ä¿®æ­£
# lodash 4.17.20 â†’ 4.17.21

# ç¬¬äº”æ­©ï¼šä»–ã®ä¾å­˜é–¢ä¿‚ã‚’æ›´æ–°
pcu update --interactive --create-backup

# ç”°ä¸­ã•ã‚“ãŒReactã¨å‹å®šç¾©ã®æ›´æ–°ã‚’é¸æŠ
# âœ… react 18.0.0 â†’ 18.3.1
# âœ… @types/react 18.0.0 â†’ 18.2.25
```

</CodeGroup>

ã“ã‚Œã§ç”°ä¸­ã•ã‚“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯æœ€æ–°ã§å®‰å…¨ã«ãªã‚Šã¾ã—ãŸï¼å½¼ãŒå­¦ã‚“ã ã“ã¨ï¼š

1. âœ… å¸¸ã«æœ€åˆã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ä¿®æ­£
2. âœ… ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦æ›´æ–°ã‚’æ…é‡ã«é¸æŠ
3. âœ… å•é¡Œã«å‚™ãˆã¦ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å¸¸ã«ä½œæˆ
4. âœ… æ›´æ–°å¾Œã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹çŠ¶æ…‹ã‚’æ¤œè¨¼

## åŸºæœ¬ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### æ—¥å¸¸çš„ãªä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯

æ—¥å¸¸çš„ãªé–‹ç™ºãƒ«ãƒ¼ãƒãƒ³ã®ä¸€éƒ¨ã¨ã—ã¦æ›´æ–°ã‚’ãƒã‚§ãƒƒã‚¯ï¼š

<CodeGroup>

```bash {{ title: 'ã‚¯ã‚¤ãƒƒã‚¯ãƒã‚§ãƒƒã‚¯' }}
# ã‚·ãƒ³ãƒ—ãƒ«ãªå‡ºåŠ›ã§æ›´æ–°ã‚’ãƒã‚§ãƒƒã‚¯
pcu -c --format minimal

# ä¾‹ã®å‡ºåŠ›ï¼š
# react           ^18.2.0  â†’  ^18.3.0
# typescript      ^5.0.0   â†’  ^5.2.0
# @types/node     ^18.0.0  â†’  ^20.0.0
```

```bash {{ title: 'è©³ç´°ãƒã‚§ãƒƒã‚¯' }}
# å®Œå…¨ãªãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ã§ãƒã‚§ãƒƒã‚¯
pcu -c

# ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¡¨ç¤ºã€å«ã‚€ã‚‚ã®ï¼š
# - ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å
# - ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³
# - åˆ©ç”¨å¯èƒ½ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³
# - æ›´æ–°ã‚¿ã‚¤ãƒ—ï¼ˆmajor/minor/patchï¼‰
# - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
```

</CodeGroup>

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä»˜ãã®å®‰å…¨ãªæ›´æ–°

è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã§ä¾å­˜é–¢ä¿‚ã‚’å®‰å…¨ã«æ›´æ–°ï¼š

```bash
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä»˜ãã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ›´æ–°
pcu -i -b

# ã¾ãŸã¯ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä»˜ãè‡ªå‹•ãƒã‚¤ãƒŠãƒ¼æ›´æ–°
pcu -u --target minor --create-backup
```

### ã‚¿ãƒ¼ã‚²ãƒƒãƒˆæŒ‡å®šæ›´æ–°

ç‰¹å®šã‚¿ã‚¤ãƒ—ã®å¤‰æ›´ã®ã¿ã‚’æ›´æ–°ï¼š

<CodeGroup>

```bash {{ title: 'ä¿å®ˆçš„ãªæ›´æ–°' }}
# ãƒ‘ãƒƒãƒæ›´æ–°ã®ã¿ï¼ˆãƒã‚°ä¿®æ­£ï¼‰
pcu -u --target patch

# ãƒã‚¤ãƒŠãƒ¼æ›´æ–°ã®ã¿ï¼ˆæ–°æ©Ÿèƒ½ã€ç ´å£Šçš„å¤‰æ›´ãªã—ï¼‰
pcu -u --target minor
```

```bash {{ title: 'æœ€æ–°ã™ã¹ã¦' }}
# æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æ›´æ–°ï¼ˆãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³å«ã‚€ï¼‰
pcu -u --target latest

# ãƒ—ãƒ¬ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å«ã‚€
pcu -u --prerelease
```

</CodeGroup>

## ãƒãƒ«ãƒã‚«ã‚¿ãƒ­ã‚°ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹

### ãƒ¬ã‚¬ã‚·ãƒ¼ã‚µãƒãƒ¼ãƒˆã‚·ãƒŠãƒªã‚ª

ä¸€ã¤ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§è¤‡æ•°ã®Reactãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç®¡ç†ï¼š

<CodeGroup>

```yaml {{ title: 'pnpm-workspace.yaml' }}
packages:
  - "apps/*"
  - "packages/*"

catalog:
  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚«ã‚¿ãƒ­ã‚° - æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³
  react: ^18.2.0
  react-dom: ^18.2.0
  @types/react: ^18.2.0

catalogs:
  # ãƒ¬ã‚¬ã‚·ãƒ¼ã‚µãƒãƒ¼ãƒˆ
  react17:
    react: ^17.0.2
    react-dom: ^17.0.2
    @types/react: ^17.0.62

  # ãƒ™ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ
  react-next:
    react: ^19.0.0-beta
    react-dom: ^19.0.0-beta
```

```bash {{ title: 'ã‚«ã‚¿ãƒ­ã‚°å›ºæœ‰ã®æ›´æ–°' }}
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚«ã‚¿ãƒ­ã‚°ã®ã¿æ›´æ–°
pcu -u --catalog default

# ãƒ¬ã‚¬ã‚·ãƒ¼Reactãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ›´æ–°
pcu -u --catalog react17 --target minor

# ãƒ™ãƒ¼ã‚¿ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯
pcu -c --catalog react-next --prerelease
```

</CodeGroup>

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½¿ç”¨

```json {{ title: 'package.json' }}
{
  "name": "@myorg/modern-app",
  "dependencies": {
    "react": "catalog:",
    "react-dom": "catalog:"
  }
}
```

```json {{ title: 'ãƒ¬ã‚¬ã‚·ãƒ¼ package.json' }}
{
  "name": "@myorg/legacy-app",
  "dependencies": {
    "react": "catalog:react17",
    "react-dom": "catalog:react17"
  }
}
```

## è¨­å®šä¾‹

### React ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†

Reactã¨é–¢é€£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å”èª¿æ›´æ–°ï¼š

```json {{ title: '.pcurc.json' }}
{
  "packageRules": [
    {
      "patterns": ["react", "react-dom"],
      "target": "minor",
      "requireConfirmation": true,
      "relatedPackages": [
        "@types/react",
        "@types/react-dom",
        "react-router-dom",
        "@testing-library/react"
      ]
    }
  ],
  "security": {
    "autoFixVulnerabilities": true,
    "allowMajorForSecurity": true
  }
}
```

### TypeScript ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š

ä¿å®ˆçš„ãªTypeScriptæ›´æ–°ã¨è‡ªå‹•å‹å®šç¾©ï¼š

```json {{ title: '.pcurc.json' }}
{
  "packageRules": [
    {
      "patterns": ["typescript"],
      "target": "minor",
      "requireConfirmation": true
    },
    {
      "patterns": ["@types/*"],
      "target": "latest",
      "autoUpdate": true
    },
    {
      "patterns": ["eslint*", "@typescript-eslint/*"],
      "target": "minor",
      "groupUpdate": true
    }
  ]
}
```

### ä¼æ¥­è¨­å®š

å³æ ¼ãªç®¡ç†ã‚’æŒã¤ä¼æ¥­ãƒ¬ãƒ™ãƒ«è¨­å®šï¼š

```json {{ title: '.pcurc.json' }}
{
  "defaults": {
    "target": "minor",
    "createBackup": true
  },
  "exclude": ["typescript", "@types/node", "react", "react-dom"],
  "security": {
    "autoFixVulnerabilities": true,
    "allowMajorForSecurity": true,
    "notifyOnSecurityUpdate": true
  },
  "advanced": {
    "concurrency": 3,
    "timeout": 60000,
    "retries": 5
  },
  "ui": {
    "theme": "minimal",
    "animations": false
  }
}
```

## CI/CD çµ±åˆ

### GitHub Actions

CI ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯ã‚’è‡ªå‹•åŒ–ï¼š

<CodeGroup>

```yaml {{ title: '.github/workflows/dependencies.yml' }}
name: Check Dependencies

on:
  schedule:
    - cron: '0 9 * * MON'  # æ¯é€±æœˆæ›œæ—¥åˆå‰9æ™‚
  workflow_dispatch:

jobs:
  check-deps:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install PCU
        run: npm install -g pcu

      - name: Check for updates
        run: pcu -c --format json > updates.json

      - name: Create Issue if Updates Available
        if: success()
        uses: actions/github-script@v7
        with:
          script: |
            const fs = require('fs');
            const updates = JSON.parse(fs.readFileSync('updates.json', 'utf8'));
            if (updates.length > 0) {
              github.rest.issues.create({
                owner: context.repo.owner,
                repo: context.repo.repo,
                title: 'Dependencies Update Available',
                body: `Found ${updates.length} packages that can be updated:

` +
                      updates.map(u => `- ${u.package}: ${u.current} â†’ ${u.available}`).join('
')
              });
            }
```

```bash {{ title: 'Package.json ã‚¹ã‚¯ãƒªãƒ—ãƒˆ' }}
# package.json ã«è¿½åŠ 
{
  "scripts": {
    "deps:check": "pcu -c",
    "deps:update": "pcu -i -b",
    "deps:update-minor": "pcu -u --target minor --create-backup",
    "deps:analyze": "pcu -a default"
  }
}
```

</CodeGroup>

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å•é¡Œ

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å•é¡Œã¨ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚¢ã‚¯ã‚»ã‚¹ã®å‡¦ç†ï¼š

```bash
# é…ã„æ¥ç¶šã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’å¢—åŠ 
pcu -c --timeout 60000

# ä¸å®‰å®šãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ä¸¦è¡Œæ€§ã‚’æ¸›å°‘
pcu -u --concurrency 2
```

### ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æ¤œè¨¼

ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®šã‚’æ¤œè¨¼ï¼š

```bash
# ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®šã‚’ãƒã‚§ãƒƒã‚¯
pcu -s --validate

# è©³ç´°ãªãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æƒ…å ±ã‚’å–å¾—
pcu -s --stats --verbose
```

### ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¬ã‚¸ã‚¹ãƒˆãƒª

PCU ã¯ `.npmrc` ã¨ `.pnpmrc` è¨­å®šã‚’è‡ªå‹•çš„ã«èª­ã¿å–ã‚Šã¾ã™ï¼š

<CodeGroup>

```ini {{ title: '.npmrc' }}
@myorg:registry=https://npm.private-registry.com/
//npm.private-registry.com/:_authToken=${NPM_TOKEN}

registry=https://registry.npmjs.org/
```

```bash {{ title: 'ä½¿ç”¨æ–¹æ³•' }}
# PCU ã¯ãƒ¬ã‚¸ã‚¹ãƒˆãƒªè¨­å®šã‚’è‡ªå‹•çš„ã«ä½¿ç”¨
pcu -c

# ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‹ã‚‰ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒã‚§ãƒƒã‚¯
pcu -c --include "@myorg/*"
```

</CodeGroup>

## é«˜åº¦ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

### å½±éŸ¿åˆ†æ

ç‰¹å®šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ›´æ–°ã®å½±éŸ¿ã‚’åˆ†æï¼š

```bash
# React æ›´æ–°ã®å½±éŸ¿ã‚’åˆ†æ
pcu -a default react

# ç‰¹å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§åˆ†æ
pcu -a default react 18.3.0

# ã™ã¹ã¦ã®ã‚«ã‚¿ãƒ­ã‚°ã§ã®å½±éŸ¿ã‚’ãƒã‚§ãƒƒã‚¯
pcu -a react17 react 17.0.3
```

### é¸æŠçš„æ›´æ–°

ç‰¹å®šã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã¿ã‚’æ›´æ–°ï¼š

```bash
# React é–¢é€£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿æ›´æ–°
pcu -u --include "react*"

# ã‚³ã‚¢ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ä»¥å¤–ã™ã¹ã¦ã‚’æ›´æ–°
pcu -u --exclude "react*,vue*,angular*"

# å‹å®šç¾©ã®ã¿æ›´æ–°
pcu -u --include "@types/*" --target latest
```

### ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³åˆ†æ

é©ç”¨å‰ã«å¤‰æ›´ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼š

```bash
# ä½•ãŒæ›´æ–°ã•ã‚Œã‚‹ã‹ã‚’ç¢ºèª
pcu -u --dry-run --verbose

# ç‰¹å®šã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
pcu -u --dry-run --target minor --include "@types/*"
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### æ—¥å¸¸ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

1. **æœã®ãƒã‚§ãƒƒã‚¯**ï¼š`pcu -c` ã§åˆ©ç”¨å¯èƒ½ãªæ›´æ–°ã‚’ç¢ºèª
2. **å½±éŸ¿ãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šé‡è¦ãªæ›´æ–°ã«ã¯ `pcu -a` ã‚’ä½¿ç”¨
3. **å®‰å…¨ãªæ›´æ–°**ï¼šãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä»˜ãã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ›´æ–° `pcu -i -b` ã‚’ä½¿ç”¨
4. **ãƒ†ã‚¹ãƒˆ**ï¼šæ›´æ–°å¾Œã«ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã‚’å®Ÿè¡Œ
5. **ã‚³ãƒŸãƒƒãƒˆ**ï¼šä¾å­˜é–¢ä¿‚æ›´æ–°ã‚’å€‹åˆ¥ã«ã‚³ãƒŸãƒƒãƒˆ

### ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

1. **è¨­å®šå…±æœ‰**ï¼š`.pcurc.json` ã‚’ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã«ã‚³ãƒŸãƒƒãƒˆ
2. **å®šæœŸãƒ¬ãƒ“ãƒ¥ãƒ¼**ï¼šé€±æ¬¡ä¾å­˜é–¢ä¿‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
3. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å„ªå…ˆ**ï¼šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ›´æ–°ã‚’å¸¸ã«å„ªå…ˆ
4. **æ–‡æ›¸åŒ–**ï¼šä¸»è¦ãªä¾å­˜é–¢ä¿‚æ±ºå®šã‚’æ–‡æ›¸åŒ–
5. **ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»**ï¼šç°¡å˜ãªãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®ãŸã‚ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä¿æŒ

### ãƒªãƒªãƒ¼ã‚¹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

1. **ãƒ—ãƒ¬ãƒªãƒªãƒ¼ã‚¹ãƒã‚§ãƒƒã‚¯**ï¼šãƒªãƒªãƒ¼ã‚¹å‰ã« `pcu -c --target patch`
2. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³**ï¼šCI ã§ `autoFixVulnerabilities` ã‚’æœ‰åŠ¹åŒ–
3. **ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®š**ï¼šæœ¬ç•ªãƒªãƒªãƒ¼ã‚¹ã§ã¯æ­£ç¢ºãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ç”¨
4. **æ›´æ–°è¨ˆç”»**ï¼šãƒªãƒªãƒ¼ã‚¹é–“ã§ä¾å­˜é–¢ä¿‚æ›´æ–°ã‚’è¨ˆç”»

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### ç¶™ç¶šçš„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³

é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ã‚’çµ±åˆï¼š

<CodeGroup>

```bash {{ title: 'æ—¥å¸¸ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯' }}
# ã‚¯ã‚¤ãƒƒã‚¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
pcu security

# è„†å¼±æ€§ã‚’è‡ªå‹•ä¿®æ­£
pcu security --fix-vulns

# é«˜ãŠã‚ˆã³é‡è¦ãªå•é¡Œã®ã¿ã«ç„¦ç‚¹
pcu security --severity high --fix-vulns
```

```bash {{ title: 'åŒ…æ‹¬çš„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»' }}
# Snykçµ±åˆã«ã‚ˆã‚‹å®Œå…¨ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
pcu security --snyk --include-dev --verbose

# ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒãƒ¼ãƒˆã‚’å‡ºåŠ›
pcu security --format json --snyk > security-report.json
```

</CodeGroup>

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æŒ‡å‘ã® CI/CD

```yaml {{ title: '.github/workflows/security.yml' }}
name: Security Audit

on:
  schedule:
    - cron: '0 2 * * *' # æ¯æ—¥åˆå‰2æ™‚
  pull_request:
    branches: [main]

jobs:
  security:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install PCU
        run: npm install -g pcu

      - name: Security Scan
        run: pcu security --fix-vulns --format json > security-results.json

      - name: Upload Security Report
        uses: actions/upload-artifact@v4
        with:
          name: security-report
          path: security-results.json
```

## ãƒ†ãƒ¼ãƒã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ†ãƒ¼ãƒè¨­å®š

ãƒãƒ¼ãƒ ç”¨PCUã®å¤–è¦³ã‚’è¨­å®šï¼š

```bash
# ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ†ãƒ¼ãƒã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã‚’é–‹å§‹
pcu theme --interactive

# ç‰¹å®šãƒ†ãƒ¼ãƒã‚’è¨­å®š
pcu theme --set modern

# ã™ã¹ã¦ã®åˆ©ç”¨å¯èƒ½ãƒ†ãƒ¼ãƒã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ãƒªã‚¹ãƒˆ
pcu theme --list
```

### ãƒãƒ¼ãƒ ãƒ†ãƒ¼ãƒè¨­å®š

```json {{ title: '.pcurc.json' }}
{
  "ui": {
    "theme": "modern",
    "progressBars": true,
    "animations": true,
    "colorScheme": "auto"
  },
  "output": {
    "format": "table",
    "color": true,
    "verbose": false
  }
}
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### å¤§è¦æ¨¡ Monorepo è¨­å®š

æ•°ç™¾ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å«ã‚€å¤§è¦æ¨¡ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ç”¨ã®æœ€é©åŒ–è¨­å®šï¼š

```json {{ title: '.pcurc.json' }}
{
  "advanced": {
    "concurrency": 15,
    "timeout": 120000,
    "retries": 5,
    "batchSize": 100
  },
  "cache": {
    "enabled": true,
    "ttl": 7200000,
    "maxSize": 104857600,
    "persistToDisk": true
  },
  "monorepo": {
    "performance": {
      "cacheWorkspaceStructure": true,
      "parallelCatalogProcessing": true,
      "streamingMode": true
    }
  }
}
```

### ä¸¦åˆ—å‡¦ç†æˆ¦ç•¥

```bash
# é«˜ä¸¦è¡Œæ€§æ›´æ–°ï¼ˆå¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘ï¼‰
pcu -u --concurrency 20 --timeout 180000

# ãƒãƒƒãƒå‡¦ç†ãƒ¢ãƒ¼ãƒ‰
pcu -u --batch-size 50 --progress-style fancy
```

## ç§»è¡Œä¾‹

### npm-check-updates ã‹ã‚‰ã®ç§»è¡Œ

`ncu` ã‹ã‚‰ PCU ã¸ã®ç§»è¡Œï¼š

<CodeGroup>

```bash {{ title: 'ncu ç­‰ä¾¡ã‚³ãƒãƒ³ãƒ‰' }}
# ncu ã‚³ãƒãƒ³ãƒ‰
ncu

# PCU ç­‰ä¾¡ã‚³ãƒãƒ³ãƒ‰
pcu -c
```

```bash {{ title: 'ncu æ›´æ–°ã‚³ãƒãƒ³ãƒ‰' }}
# ncu æ›´æ–°
ncu -u

# PCU ç­‰ä¾¡ã‚³ãƒãƒ³ãƒ‰
pcu -u --target latest
```

</CodeGroup>

### ãƒ¬ã‚¬ã‚·ãƒ¼ä¾å­˜é–¢ä¿‚ç®¡ç†ã‹ã‚‰ã®ç§»è¡Œ

æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ pnpm ã‚«ã‚¿ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ ã«ç§»è¡Œï¼š

```bash
# ã‚¹ãƒ†ãƒƒãƒ—1ï¼šæ—¢å­˜ä¾å­˜é–¢ä¿‚ã‚’åˆ†æ
pcu migrate --analyze

# ã‚¹ãƒ†ãƒƒãƒ—2ï¼šã‚«ã‚¿ãƒ­ã‚°è¨­å®šã‚’ä½œæˆ
pcu migrate --create-catalogs

# ã‚¹ãƒ†ãƒƒãƒ—3ï¼špackage.json ã‚’å¤‰æ›
pcu migrate --convert-packages

# ã‚¹ãƒ†ãƒƒãƒ—4ï¼šç§»è¡Œã‚’æ¤œè¨¼
pcu analyze --validate-migration
```

## ç§»è¡Œã‚¬ã‚¤ãƒ‰

### npm/yarn ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‹ã‚‰ã®ç§»è¡Œ

å®Œå…¨ãªç§»è¡Œãƒ—ãƒ­ã‚»ã‚¹ï¼š

<CodeGroup>

```bash {{ title: 'ç§»è¡Œæº–å‚™' }}
# æ—¢å­˜è¨­å®šã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
cp package.json package.json.backup
cp package-lock.json package-lock.json.backup 2>/dev/null || true
cp yarn.lock yarn.lock.backup 2>/dev/null || true

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã‚’åˆ†æ
pcu migrate --dry-run --verbose
```

```bash {{ title: 'ç§»è¡Œå®Ÿè¡Œ' }}
# pnpm ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«å¤‰æ›
pcu migrate --to-pnpm-workspace

# ã‚«ã‚¿ãƒ­ã‚°è¨­å®šã‚’ç”Ÿæˆ
pcu migrate --generate-catalogs --strategy conservative

# ç§»è¡Œçµæœã‚’æ¤œè¨¼
pcu analyze --migration-report
```

</CodeGroup>

### æ®µéšçš„æ¡ç”¨æˆ¦ç•¥

```json {{ title: 'ãƒ•ã‚§ãƒ¼ã‚º1ï¼šåŸºæœ¬è¨­å®š' }}
{
  "defaults": {
    "target": "patch"
  },
  "exclude": ["react", "react-dom", "typescript"]
}
```

```json {{ title: 'ãƒ•ã‚§ãƒ¼ã‚º2ï¼šã‚«ãƒãƒ¬ãƒƒã‚¸æ‹¡å¼µ' }}
{
  "defaults": {
    "target": "minor"
  },
  "packageRules": [
    {
      "patterns": ["@types/*"],
      "target": "latest",
      "autoUpdate": true
    }
  ]
}
```

## CI/CD ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼çµ±åˆ

### ãƒãƒ«ãƒç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

ç•°ãªã‚‹ç’°å¢ƒå‘ã‘ã®å®Œå…¨ãª CI/CD ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼š

```yaml {{ title: '.github/workflows/deploy.yml' }}
name: Multi-Environment Deployment

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

env:
  PCU_WORKSPACE: ./

jobs:
  dependency-check:
    runs-on: ubuntu-latest
    outputs:
      has-updates: ${{ steps.check.outputs.has-updates }}
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install PCU
        run: npm install -g pcu

      - name: Check Dependencies
        id: check
        run: |
          pcu -c --format json > updates.json
          if [ -s updates.json ]; then
            echo "has-updates=true" >> $GITHUB_OUTPUT
          else
            echo "has-updates=false" >> $GITHUB_OUTPUT
          fi

  update-dependencies:
    needs: dependency-check
    if: needs.dependency-check.outputs.has-updates == 'true'
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Create Update PR
        run: |
          pcu -u --target minor --create-backup
          # PRä½œæˆãƒ­ã‚¸ãƒƒã‚¯...

  deploy-staging:
    if: github.ref == 'refs/heads/develop'
    runs-on: ubuntu-latest
    environment: staging
    steps:
      - uses: actions/checkout@v4
      - name: Deploy to Staging
        run: |
          pcu security --fix-vulns
          # ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚¸ãƒƒã‚¯...

  deploy-production:
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    environment: production
    needs: [dependency-check]
    steps:
      - uses: actions/checkout@v4
      - name: Production Security Check
        run: |
          pcu security --severity critical --format json
          # ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚¸ãƒƒã‚¯...
```

## ä¼æ¥­ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã¨ç›£æŸ»

ä¼æ¥­ãƒ¬ãƒ™ãƒ«ã®ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼š

```json {{ title: '.pcurc.json - ä¼æ¥­è¨­å®š' }}
{
  "enterprise": {
    "compliance": {
      "requireApproval": ["major"],
      "auditTrail": true,
      "licenseCheck": true,
      "securityScan": "mandatory"
    },
    "approval": {
      "majorUpdates": {
        "approvers": ["security-team", "tech-lead"],
        "timeout": "7d"
      }
    }
  },
  "logging": {
    "level": "info",
    "file": "./logs/pcu-audit.log",
    "includeUserInfo": true
  }
}
```

### ãƒãƒ«ãƒãƒãƒ¼ãƒ å”åŠ›

```bash
# ãƒãƒ¼ãƒ Aï¼šãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒãƒ¼ãƒ 
pcu -u --workspace-filter "@frontend/*" --target minor

# ãƒãƒ¼ãƒ Bï¼šãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒãƒ¼ãƒ 
pcu -u --workspace-filter "@backend/*" --target patch

# ãƒãƒ¼ãƒ Cï¼šå…±æœ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒãƒ¼ãƒ 
pcu -u --workspace-filter "@shared/*" --target latest
```

### ä¼æ¥­ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼

```json {{ title: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼è¨­å®š' }}
{
  "security": {
    "policy": {
      "allowedLicenses": ["MIT", "Apache-2.0", "BSD-3-Clause"],
      "blockedPackages": ["unsafe-package"],
      "maxAge": "90d",
      "severityThreshold": "moderate"
    },
    "scanning": {
      "schedule": "daily",
      "integrations": ["snyk", "whitesource"],
      "notifications": {
        "slack": "#security-alerts",
        "email": ["security@company.com"]
      }
    }
  }
}
```

### ãƒªãƒªãƒ¼ã‚¹ç®¡ç†

ä¼æ¥­ãƒ¬ãƒ™ãƒ«ã®ãƒªãƒªãƒ¼ã‚¹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³çµ±åˆï¼š

```bash
# ãƒ—ãƒ¬ãƒªãƒªãƒ¼ã‚¹ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯
pcu enterprise --pre-release-check

# ä¾å­˜é–¢ä¿‚å‡çµ
pcu enterprise --freeze-deps --release v2.1.0

# ãƒã‚¹ãƒˆãƒªãƒªãƒ¼ã‚¹ä¾å­˜é–¢ä¿‚è§£å‡
pcu enterprise --unfreeze-deps --post-release

# ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
pcu enterprise --compliance-report --format pdf
```
