export const metadata = {
  title: 'FAQ',
  description:
    'Preguntas frecuentes sobre PCU (pnpm-catalog-updates). Encuentra respuestas rÃ¡pidas a preguntas comunes y problemas.',
};

# Preguntas Frecuentes

Respuestas rÃ¡pidas a preguntas comunes sobre PCU. Â¿No encuentras lo que buscas? Revisa nuestra [guÃ­a de soluciÃ³n de problemas](/troubleshooting) o [abre un issue](https://github.com/houko/pnpm-catalog-updates/issues). {{ className: 'lead' }}

## InstalaciÃ³n y ConfiguraciÃ³n

### Â¿CÃ³mo instalo PCU?

PCU puede instalarse globalmente a travÃ©s de npm, pnpm o yarn:

<CodeGroup>

```bash {{ title: 'npm' }}
npm install -g pcu
```

```bash {{ title: 'pnpm' }}
pnpm add -g pnpm-catalog-updates
```

```bash {{ title: 'yarn' }}
yarn global add pnpm-catalog-updates
```

```bash {{ title: 'npx (sin instalaciÃ³n)' }}
npx pnpm-catalog-updates check
```

</CodeGroup>

### Â¿CuÃ¡les son los requisitos del sistema?

- **Node.js**: >= 18.0.0 (se recomienda LTS)
- **pnpm**: >= 8.0.0
- **Sistema Operativo**: Windows, macOS, Linux

### Â¿Necesito un workspace de pnpm para usar PCU?

SÃ­, PCU estÃ¡ especÃ­ficamente diseÃ±ado para workspaces de pnpm con dependencias de catÃ¡logo. Si aÃºn no tienes un workspace, ejecuta `pcu init` para crear uno.

### Â¿Puedo usar PCU con proyectos de npm o yarn?

No, PCU es exclusivamente para workspaces de pnpm que usan dependencias de catÃ¡logo. Para otros gestores de paquetes, considera herramientas como `npm-check-updates` o `yarn upgrade-interactive`.

## ConfiguraciÃ³n

### Â¿DÃ³nde deberÃ­a colocar mi configuraciÃ³n `.pcurc.json`?

ColÃ³cala en el directorio raÃ­z de tu workspace (mismo nivel que `pnpm-workspace.yaml`). PCU tambiÃ©n admite:

- ConfiguraciÃ³n global: `~/.pcurc.json`
- ConfiguraciÃ³n de proyecto: `./.pcurc.json` (mayor prioridad)

### Â¿CuÃ¡l es la diferencia entre configuraciÃ³n a nivel de workspace y global?

- **Global** (`~/.pcurc.json`): Aplicada a todas las operaciones de PCU en diferentes proyectos
- **Proyecto** (`./.pcurc.json`): EspecÃ­fica del workspace actual, sobrescribe configuraciones globales

### Â¿Puedo configurar diferentes estrategias de actualizaciÃ³n para diferentes paquetes?

Â¡SÃ­! Usa reglas de paquetes en tu configuraciÃ³n:

```json
{
  "packageRules": [
    {
      "patterns": ["react", "react-dom"],
      "target": "minor",
      "requireConfirmation": true
    },
    {
      "patterns": ["@types/*"],
      "target": "latest",
      "autoUpdate": true
    }
  ]
}
```

## Comandos y Uso

### Â¿CuÃ¡l es la diferencia entre `pcu check` y `pcu -c`?

Â¡Son idÃ©nticos! PCU admite tanto nombres de comando completos como alias cortos:

- `pcu check` = `pcu -c`
- `pcu update` = `pcu -u`
- `pcu interactive` = `pcu -i`

### Â¿CÃ³mo actualizo solo tipos especÃ­ficos de paquetes?

Usa las banderas `--include` y `--exclude`:

```bash
# Solo actualizar paquetes relacionados con React
pcu update --include "react*"

# Actualizar todo excepto cambios importantes de frameworks
pcu update --exclude "react*,vue*,angular*"

# Solo actualizar definiciones de tipos
pcu update --include "@types/*"
```

### Â¿CuÃ¡l es la diferencia entre objetivos de actualizaciÃ³n?

- **`patch`**: Solo correcciÃ³n de errores (1.0.0 â†’ 1.0.1)
- **`minor`**: Nuevas caracterÃ­sticas, compatible hacia atrÃ¡s (1.0.0 â†’ 1.1.0)
- **`latest`**: Ãšltima versiÃ³n estable incluyendo cambios importantes (1.0.0 â†’ 2.0.0)
- **`greatest`**: Ãšltima versiÃ³n incluyendo prelanzamientos (1.0.0 â†’ 2.0.0-beta.1)

### Â¿CÃ³mo verifico quÃ© se actualizarÃ¡ antes de actualizar realmente?

Usa la bandera `--dry-run`:

```bash
pcu update --dry-run --target minor
```

Esto te muestra exactamente quÃ© se actualizarÃ­a sin hacer ningÃºn cambio.

## SoluciÃ³n de Problemas

### Â¿Por quÃ© PCU dice "No se encontrÃ³ workspace de pnpm"?

Esto significa que PCU no puede encontrar un archivo `pnpm-workspace.yaml` en tu directorio actual. Soluciones:

1. **Crear un workspace**: Ejecuta `pcu init`
2. **Navegar a la raÃ­z del workspace**: `cd` al directorio que contiene `pnpm-workspace.yaml`
3. **Especificar ruta del workspace**: `pcu -c --workspace /ruta/al/workspace`

### Â¿Por quÃ© PCU dice "No se encontraron dependencias de catÃ¡logo"?

Tu workspace aÃºn no usa dependencias de catÃ¡logo. Necesitas:

1. **CatÃ¡logo en archivo de workspace**:

   ```yaml
   # pnpm-workspace.yaml
   packages:
     - 'packages/*'

   catalog:
     react: ^18.2.0
     typescript: ^5.0.0
   ```

2. **Usar catÃ¡logos en paquetes**:
   ```json
   {
     "dependencies": {
       "react": "catalog:",
       "typescript": "catalog:"
     }
   }
   ```

### PCU estÃ¡ ejecutÃ¡ndose muy lentamente. Â¿CÃ³mo puedo mejorar el rendimiento?

Prueba estas optimizaciones:

1. **Reducir concurrencia**: `pcu check --concurrency 2`
2. **Aumentar timeout**: `pcu check --timeout 60000`
3. **Habilitar cachÃ©**: Asegura `PCU_CACHE_ENABLED=true` (predeterminado)
4. **Usar filtrado**: `pcu check --include "react*"` para paquetes especÃ­ficos

### Â¿CÃ³mo arreglo errores "ENOTFOUND registry.npmjs.org"?

Este es un problema de conectividad de red:

1. **Verificar conexiÃ³n a internet**: `ping registry.npmjs.org`
2. **Configurar proxy**: Establece variables de entorno `HTTP_PROXY` y `HTTPS_PROXY`
3. **Usar registro corporativo**: Configura tu registro de la empresa en `.npmrc`
4. **Aumentar timeout**: `PCU_TIMEOUT=120000 pcu check`

## Seguridad

### Â¿CÃ³mo maneja PCU las vulnerabilidades de seguridad?

PCU se integra con npm audit y opcionalmente Snyk:

```bash
# Verificar vulnerabilidades
pcu security

# Arreglar automÃ¡ticamente problemas de seguridad
pcu security --fix-vulns

# Incluir escaneo de Snyk
pcu security --snyk --severity high
```

### Â¿DeberÃ­a arreglar automÃ¡ticamente todas las vulnerabilidades de seguridad?

Usa precauciÃ³n con `--auto-fix`:

- âœ… **Seguro**: Actualizaciones de parche y versiones menores para correcciones de seguridad
- âš ï¸ **Revisar**: Actualizaciones de versiones importantes que podrÃ­an romper tu app
- âŒ **Evitar**: Arreglar automÃ¡ticamente a ciegas en producciÃ³n sin probar

### Â¿CÃ³mo manejo advertencias de seguridad de falsos positivos?

Configura vulnerabilidades ignoradas en `.pcurc.json`:

```json
{
  "security": {
    "ignoredVulnerabilities": ["CVE-2021-23337"],
    "ignoredPackages": ["lodash@4.17.20"],
    "customAuditConfig": {
      "low": "ignore",
      "moderate": "warn"
    }
  }
}
```

## Flujos de Trabajo y CI/CD

### Â¿Puedo usar PCU en pipelines de CI/CD?

Â¡Absolutamente! PCU estÃ¡ diseÃ±ado para automatizaciÃ³n:

```bash
# Comandos amigables para CI
PCU_NO_COLOR=true pcu check --format json
pcu security --format json --severity critical
```

Ve nuestra [guÃ­a de integraciÃ³n CI/CD](/cicd) para ejemplos completos.

### Â¿CÃ³mo creo PRs automatizados de actualizaciÃ³n de dependencias?

Usa PCU con GitHub Actions, GitLab CI u otras plataformas:

```yaml
- name: Actualizar dependencias
  run: |
    pcu update --target minor --create-backup
    # Crear PR con cambios
```

Revisa la [guÃ­a de integraciÃ³n CI/CD](/cicd) para flujos de trabajo completos.

### Â¿CuÃ¡l es el mejor flujo de trabajo para colaboraciÃ³n en equipo?

1. **ConfiguraciÃ³n compartida**: Commitea `.pcurc.json` al control de versiones
2. **Revisiones regulares**: Programa reuniones semanales de revisiÃ³n de dependencias
3. **Seguridad primero**: Siempre prioriza actualizaciones de seguridad
4. **Actualizaciones incrementales**: Prefiere actualizaciones pequeÃ±as y frecuentes sobre grandes lotes
5. **Testing**: Siempre prueba despuÃ©s de actualizaciones antes de hacer merge

## Uso Avanzado

### Â¿Puedo usar mÃºltiples catÃ¡logos en un workspace?

Â¡SÃ­! PNPM admite mÃºltiples catÃ¡logos:

```yaml
# pnpm-workspace.yaml
packages:
  - 'packages/*'

catalog:
  react: ^18.2.0

catalogs:
  react17:
    react: ^17.0.2
  experimental:
    react: ^19.0.0-beta
```

Luego Ãºsalos en paquetes:

```json
{
  "dependencies": {
    "react": "catalog:react17"
  }
}
```

### Â¿CÃ³mo analizo el impacto de actualizar un paquete especÃ­fico?

Usa el comando analyze:

```bash
# Analizar impacto de actualizar React
pcu analyze default react 18.3.0

# Verificar todos los catÃ¡logos
pcu analyze react17 react 17.0.3
```

### Â¿Puedo excluir ciertos paquetes de actualizaciones permanentemente?

SÃ­, configura exclusiones en `.pcurc.json`:

```json
{
  "exclude": ["react", "vue", "@types/node"],
  "packageRules": [
    {
      "patterns": ["critical-*"],
      "exclude": true
    }
  ]
}
```

### Â¿CÃ³mo manejo monorepos con 100+ paquetes?

Consejos de rendimiento para monorepos grandes:

1. **Procesamiento por lotes**: Configura `batchSize: 10` en configuraciones avanzadas
2. **Reducir concurrencia**: Establece `concurrency: 2` para evitar sobrecargar el registro
3. **Usar filtrado**: Procesa paquetes en grupos con patrones `--include`
4. **Habilitar cachÃ©**: Asegura que el cachÃ© estÃ© habilitado y configurado correctamente
5. **Aumentar memoria**: Establece `NODE_OPTIONS="--max-old-space-size=8192"`

## Mensajes de Error

### "No se pueden resolver dependencias peer"

Esto sucede cuando las versiones de paquetes entran en conflicto. Soluciones:

1. **Actualizar paquetes relacionados juntos**: `pcu update --include "react*"`
2. **Usar modo interactivo**: `pcu update --interactive` para elegir versiones cuidadosamente
3. **Verificar dependencias peer**: Revisa lo que requiere cada paquete
4. **Usar mÃºltiples catÃ¡logos**: Separa versiones conflictivas en diferentes catÃ¡logos

### "ConfiguraciÃ³n invÃ¡lida en .pcurc.json"

Tu archivo de configuraciÃ³n tiene errores de sintaxis JSON:

```bash
# Validar sintaxis JSON
node -e "JSON.parse(require('fs').readFileSync('.pcurc.json', 'utf8'))"

# Regenerar configuraciÃ³n si es necesario
mv .pcurc.json .pcurc.json.backup
pcu init --force
```

### "Comando no encontrado: pcu"

Problemas de instalaciÃ³n o PATH:

1. **Reinstalar globalmente**: `npm install -g pcu`
2. **Verificar PATH**: Asegura que npm global bin estÃ© en tu PATH
3. **Usar npx**: `npx pnpm-catalog-updates check` como alternativa
4. **Usar pnpm**: `pnpm add -g pnpm-catalog-updates` (recomendado)

## IntegraciÃ³n y Herramientas

### Â¿PCU funciona con Renovate o Dependabot?

PCU es una alternativa a estas herramientas, no un complemento:

- **PCU**: Control manual, especÃ­fico para pnpm, enfocado en catÃ¡logos
- **Renovate**: PRs automatizados, admite muchos gestores de paquetes
- **Dependabot**: Integrado con GitHub, actualizaciones de seguridad automatizadas

Elige basado en tus preferencias de flujo de trabajo. Para migraciÃ³n, ve nuestra [guÃ­a de migraciÃ³n](/examples#migration-from-other-tools).

### Â¿Puedo integrar PCU con mi IDE?

Aunque no hay una extensiÃ³n oficial de IDE, puedes:

1. **Agregar scripts de npm**: Configura comandos en `package.json`
2. **Usar ejecutores de tareas**: Integra con tareas de VS Code o similar
3. **IntegraciÃ³n de terminal**: La mayorÃ­a de IDEs admiten integraciÃ³n de terminal

### Â¿PCU admite registros npm privados?

Â¡SÃ­! PCU lee tu configuraciÃ³n `.npmrc`:

```ini
# .npmrc
@mycompany:registry=https://npm.company.com/
//npm.company.com/:_authToken=${NPM_TOKEN}
```

PCU usarÃ¡ automÃ¡ticamente el registro correcto para cada scope de paquete.

---

## Â¿AÃºn Tienes Preguntas?

- ğŸ“– **DocumentaciÃ³n**: Revisa nuestra [referencia de comandos](/command-reference) completa
- ğŸ› ï¸ **SoluciÃ³n de problemas**: Visita nuestra [guÃ­a de soluciÃ³n de problemas](/troubleshooting)
- ğŸ› **Reportes de bugs**: [Crea un issue](https://github.com/houko/pnpm-catalog-updates/issues)
- ğŸ’¬ **Discusiones**: [GitHub Discussions](https://github.com/houko/pnpm-catalog-updates/discussions)
