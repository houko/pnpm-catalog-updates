export const metadata = {
  title: 'Konfiguration',
  description:
    'Lernen Sie, wie Sie pnpm-catalog-updates f√ºr Ihren Workflow mit .pcurc.json-Einstellungen, Paketregeln und erweiterten Optionen konfigurieren.',
};

# Konfiguration

Konfigurieren Sie PCU f√ºr Ihren Workflow und Ihre Projektanforderungen. Lernen Sie √ºber Konfigurationsdateien, paketspezifische Regeln und erweiterte Einstellungen. {{ className: 'lead' }}

## Konfigurationsdateitypen

PCU unterst√ºtzt mehrere Konfigurationsdateiformate und -standorte, um verschiedene Entwicklungsworkflows zu ber√ºcksichtigen.

### Unterst√ºtzte Konfigurationsdateien

PCU sucht nach Konfigurationsdateien in der folgenden Reihenfolge (erste gefundene gewinnt):

<Properties>
  <Property name=".pcurc.json" type="JSON">
    Prim√§re JSON-Konfigurationsdatei im Projektverzeichnis
  </Property>
  <Property name=".pcurc.js" type="JavaScript">
    JavaScript-Konfigurationsdatei mit dynamischer Konfigurationsunterst√ºtzung
  </Property>
  <Property name="pcu.config.js" type="JavaScript">
    Alternative JavaScript-Konfigurationsdateiname
  </Property>
  <Property name="~/.pcurc.json" type="JSON">
    Globale Benutzerkonfiguration im Home-Verzeichnis
  </Property>
  <Property name="package.json" type="JSON">
    Konfiguration innerhalb von package.json unter dem "pcu"-Schl√ºssel
  </Property>
</Properties>

### JavaScript-Konfigurationsunterst√ºtzung

JavaScript-Konfigurationsdateien erm√∂glichen dynamische Konfiguration basierend auf Umgebung, Workspace-Struktur oder anderen Laufzeitbedingungen:

<CodeGroup>

```javascript {{ title: '.pcurc.js' }}
module.exports = {
  defaults: {
    target: process.env.NODE_ENV === 'production' ? 'minor' : 'latest',
    createBackup: true,
  },
  workspace: {
    autoDiscover: true,
    catalogMode: 'strict',
  },
  // Dynamische Paketregeln basierend auf Workspace-Struktur
  packageRules: [
    {
      patterns: ['react*'],
      target: 'minor',
      requireConfirmation: process.env.CI !== 'true',
    },
  ],
  // Umgebungsspezifische Konfiguration
  ...(process.env.NODE_ENV === 'development' && {
    ui: {
      theme: 'modern',
      progressBarStyle: 'fancy',
    },
  }),
};
```

```javascript {{ title: 'pcu.config.js mit Funktionen' }}
const fs = require('fs');
const path = require('path');

function getWorkspacePackages() {
  const workspaceFile = path.join(__dirname, 'pnpm-workspace.yaml');
  if (fs.existsSync(workspaceFile)) {
    // Workspace-Pakete dynamisch parsen
    return ['packages/*', 'apps/*', 'tools/*'];
  }
  return ['packages/*'];
}

module.exports = {
  workspace: {
    packages: getWorkspacePackages(),
    catalogMode: 'flexible',
  },
  packageRules: [
    // Regeln basierend auf vorhandenen Paketen generieren
    ...fs.readdirSync('./packages').map((pkg) => ({
      patterns: [`@myorg/${pkg}`],
      target: 'minor',
    })),
  ],
};
```

</CodeGroup>

### Package.json-Konfiguration

F√ºr einfachere Projekte kann die Konfiguration in package.json eingebettet werden:

```json
{
  "name": "my-project",
  "pcu": {
    "defaults": {
      "target": "minor",
      "createBackup": true
    },
    "packageRules": [
      {
        "patterns": ["@types/*"],
        "target": "latest",
        "autoUpdate": true
      }
    ]
  }
}
```

### Konfigurationsvalidierung

PCU validiert Konfigurationsdateien automatisch und bietet detaillierte Fehlermeldungen f√ºr h√§ufige Probleme:

#### Validierungsfeatures

- **JSON-Schema-Validierung**: Stellt sicher, dass alle Konfigurationseigenschaften g√ºltig sind
- **Pattern-Validierung**: Validiert Glob-Patterns und Paketnamenformate
- **Typpr√ºfung**: √úberpr√ºft korrekte Datentypen f√ºr alle Konfigurationswerte
- **Konflikterkennung**: Identifiziert widerspr√ºchliche Regeln und Konfigurationsoptionen
- **Vorschlagssystem**: Bietet hilfreiche Vorschl√§ge zur Behebung von Konfigurationsfehlern

#### Validierungsbeispiele

```bash
# Aktuelle Konfiguration validieren
pcu workspace --validate

# H√§ufige Validierungsfehler mit Vorschl√§gen:
# ‚ùå Invalid target "lastest" in packageRules[0]
#    üí° Did you mean "latest"?
#
# ‚ùå Pattern "react+" is invalid glob syntax
#    üí° Use "react*" for matching packages starting with "react"
#
# ‚ö†Ô∏è  Conflicting rules for package "react"
#    üìù Rule at index 0 and 2 both match this package
```

## .pcurc.json Konfigurationsdatei Vollst√§ndige Referenz

PCU verwendet mehrere Konfigurationsdateiformate, haupts√§chlich die `.pcurc.json`-Datei im Projektverzeichnis. Diese kann manuell erstellt oder mit `pcu init` generiert werden.

### Vollst√§ndige Konfigurationsdateistruktur

<CodeGroup>

```json {{ title: 'Vollst√§ndiges Konfigurationsbeispiel' }}
{
  "defaults": {
    "target": "latest",
    "timeout": 30000,
    "createBackup": false,
    "interactive": false,
    "dryRun": false,
    "force": false,
    "prerelease": false
  },
  "workspace": {
    "autoDiscover": true,
    "catalogMode": "strict",
    "path": "./",
    "packages": ["packages/*", "apps/*"]
  },
  "output": {
    "format": "table",
    "color": true,
    "verbose": false
  },
  "ui": {
    "theme": "default",
    "progressBars": true,
    "progressBarStyle": "default",
    "animations": true,
    "colorScheme": "auto"
  },
  "update": {
    "interactive": false,
    "dryRunFirst": false,
    "skipPrereleases": true,
    "confirmMajorUpdates": true,
    "batchSize": 10
  },
  "security": {
    "autoFixVulnerabilities": false,
    "allowMajorForSecurity": false,
    "notifyOnSecurityUpdate": true,
    "severityThreshold": "moderate"
  },
  "advanced": {
    "concurrency": 5,
    "timeout": 30000,
    "retries": 3,
    "cacheValidityMinutes": 60,
    "checkForUpdates": true,
    "batchSize": 50
  },
  "cache": {
    "enabled": true,
    "ttl": 3600000,
    "maxSize": 52428800,
    "maxEntries": 10000,
    "persistToDisk": true,
    "cacheDir": "~/.pcu/cache"
  },
  "registry": {
    "default": "https://registry.npmjs.org/",
    "timeout": 30000,
    "retries": 3
  },
  "include": ["*"],
  "exclude": [],
  "packageRules": [
    {
      "patterns": ["react*"],
      "target": "minor",
      "requireConfirmation": true
    }
  ],
  "notification": {
    "enabled": true,
    "updateAvailable": true,
    "securityAlerts": true
  },
  "logging": {
    "level": "info",
    "file": "./pcu.log",
    "maxFiles": 5,
    "maxSize": "10MB"
  }
}
```

```json {{ title: 'Minimale Konfiguration' }}
{
  "defaults": {
    "target": "minor"
  },
  "exclude": ["typescript", "@types/node"]
}
```

</CodeGroup>

### Detaillierte Konfigurationsoptionen

#### defaults Standardeinstellungen

<Properties>
  <Property name="target" type="enum" default="latest">
    Standard-Update-Ziel: `latest` | `greatest` | `minor` | `patch` | `newest`
  </Property>
  <Property name="timeout" type="number" default="30000">
    Netzwerk-Request-Timeout (Millisekunden)
  </Property>
  <Property name="createBackup" type="boolean" default="false">
    Backup-Datei vor Update erstellen
  </Property>
  <Property name="interactive" type="boolean" default="false">
    Interaktiven Modus standardm√§√üig aktivieren
  </Property>
  <Property name="dryRun" type="boolean" default="false">
    Vorschaumodus standardm√§√üig aktivieren (keine tats√§chlichen Updates)
  </Property>
  <Property name="force" type="boolean" default="false">
    Updates erzwingen (Warnungen √ºberspringen)
  </Property>
  <Property name="prerelease" type="boolean" default="false">
    Prerelease-Versionen einbeziehen
  </Property>
</Properties>

#### workspace Workspace-Einstellungen

<Properties>
  <Property name="autoDiscover" type="boolean" default="true">
    Workspace-Struktur automatisch erkennen
  </Property>
  <Property name="catalogMode" type="enum" default="strict">
    Katalogmodus: `strict` | `loose` | `mixed`
  </Property>
  <Property name="path" type="string" default="./">
    Workspace-Root-Verzeichnispfad
  </Property>
  <Property name="packages" type="string[]">
    Paketverzeichnis-√úbereinstimmungsmuster-Array (√ºberschreibt pnpm-workspace.yaml)
  </Property>
</Properties>

#### output Ausgabeeinstellungen

<Properties>
  <Property name="format" type="enum" default="table">
    Ausgabeformat: `table` | `json` | `yaml` | `minimal`
  </Property>
  <Property name="color" type="boolean" default="true">
    Farbige Ausgabe aktivieren
  </Property>
  <Property name="verbose" type="boolean" default="false">
    Ausf√ºhrlichen Ausgabemodus aktivieren
  </Property>
</Properties>

#### ui Benutzeroberfl√§chen-Einstellungen

<Properties>
  <Property name="theme" type="enum" default="default">
    Farbthema: `default` | `modern` | `minimal` | `neon`
  </Property>
  <Property name="progressBars" type="boolean" default="true">
    Fortschrittsbalken anzeigen
  </Property>
  <Property name="progressBarStyle" type="enum" default="default">
    Fortschrittsbalken-Stil: `default` | `gradient` | `fancy` | `minimal` | `rainbow` | `neon`
  </Property>
  <Property name="animations" type="boolean" default="true">
    Animationseffekte aktivieren
  </Property>
  <Property name="colorScheme" type="enum" default="auto">
    Farbschema: `auto` | `light` | `dark`
  </Property>
</Properties>

#### update Update-Verhalten-Einstellungen

<Properties>
  <Property name="interactive" type="boolean" default="false">
    Beim Update standardm√§√üig interaktiven Modus aktivieren
  </Property>
  <Property name="dryRunFirst" type="boolean" default="false">
    Zuerst Vorschau ausf√ºhren, dann fragen ob anwenden
  </Property>
  <Property name="skipPrereleases" type="boolean" default="true">
    Prerelease-Versionen √ºberspringen
  </Property>
  <Property name="confirmMajorUpdates" type="boolean" default="true">
    Major-Version-Updates best√§tigen lassen
  </Property>
  <Property name="batchSize" type="number" default="10">
    Batch-Verarbeitung Paketanzahl
  </Property>
</Properties>

#### security Sicherheitseinstellungen

<Properties>
  <Property name="autoFixVulnerabilities" type="boolean" default="false">
    Sicherheitsl√ºcken automatisch beheben
  </Property>
  <Property name="allowMajorForSecurity" type="boolean" default="false">
    Major-Version-Updates f√ºr Sicherheitsfixes erlauben
  </Property>
  <Property name="notifyOnSecurityUpdate" type="boolean" default="true">
    Bei Sicherheitsupdates benachrichtigen
  </Property>
  <Property name="severityThreshold" type="enum" default="moderate">
    Sicherheitswarnstufen-Schwellenwert: `low` | `moderate` | `high` | `critical`
  </Property>
</Properties>

#### advanced Erweiterte Einstellungen

<Properties>
  <Property name="concurrency" type="number" default="5">
    Anzahl gleichzeitiger Netzwerk-Requests
  </Property>
  <Property name="timeout" type="number" default="30000">
    Netzwerk-Request-Timeout (Millisekunden)
  </Property>
  <Property name="retries" type="number" default="3">
    Anzahl Wiederholungsversuche bei Fehlern
  </Property>
  <Property name="cacheValidityMinutes" type="number" default="60">
    Cache-G√ºltigkeitsdauer (Minuten, 0 deaktiviert Cache)
  </Property>
  <Property name="checkForUpdates" type="boolean" default="true">
    Beim Start nach PCU-Tool-Updates suchen
  </Property>
  <Property name="batchSize" type="number" default="50">
    Maximale Batch-Verarbeitung Paketanzahl
  </Property>
</Properties>

#### cache Cache-Einstellungen

<Properties>
  <Property name="enabled" type="boolean" default="true">
    Cache-System aktivieren
  </Property>
  <Property name="ttl" type="number" default="3600000">
    Cache-Lebensdauer (Millisekunden)
  </Property>
  <Property name="maxSize" type="number" default="52428800">
    Maximale Cache-Gr√∂√üe (Bytes, Standard 50MB)
  </Property>
  <Property name="maxEntries" type="number" default="10000">
    Maximale Cache-Eintr√§ge
  </Property>
  <Property name="persistToDisk" type="boolean" default="true">
    Cache auf Festplatte persistieren
  </Property>
  <Property name="cacheDir" type="string" default="~/.pcu/cache">
    Cache-Verzeichnispfad
  </Property>
</Properties>

#### registry Registry-Einstellungen

<Properties>
  <Property name="default" type="string" default="https://registry.npmjs.org/">
    Standard-NPM-Registry-URL
  </Property>
  <Property name="timeout" type="number" default="30000">
    Registry-Request-Timeout (Millisekunden)
  </Property>
  <Property name="retries" type="number" default="3">
    Registry-Request-Wiederholungsversuche
  </Property>
</Properties>

#### Paketfilter-Einstellungen

<Properties>
  <Property name="include" type="string[]" default="['*']">
    Einzuschlie√üende Paketnamen-√úbereinstimmungsmuster-Array
  </Property>
  <Property name="exclude" type="string[]" default="[]">
    Auszuschlie√üende Paketnamen-√úbereinstimmungsmuster-Array
  </Property>
</Properties>

#### notification Benachrichtigungseinstellungen

<Properties>
  <Property name="enabled" type="boolean" default="true">
    Benachrichtigungsfunktion aktivieren
  </Property>
  <Property name="updateAvailable" type="boolean" default="true">
    Bei verf√ºgbaren Updates benachrichtigen
  </Property>
  <Property name="securityAlerts" type="boolean" default="true">
    Bei Sicherheitswarnungen benachrichtigen
  </Property>
</Properties>

#### logging Protokollierungseinstellungen

<Properties>
  <Property name="level" type="enum" default="info">
    Protokoll-Level: `error` | `warn` | `info` | `debug` | `trace`
  </Property>
  <Property name="file" type="string">
    Protokolldateipfad (optional)
  </Property>
  <Property name="maxFiles" type="number" default="5">
    Maximale Anzahl Protokolldateien
  </Property>
  <Property name="maxSize" type="string" default="10MB">
    Maximale Gr√∂√üe einzelner Protokolldateien
  </Property>
</Properties>

## Paketfilterung

Kontrollieren Sie, welche Pakete mit Include-/Exclude-Patterns und paketspezifischen Regeln aktualisiert werden sollen.

<CodeGroup>

```json {{ title: 'Einfache Filterung' }}
{
  "exclude": ["typescript", "@types/node", "react", "react-dom"],
  "include": ["lodash*", "chalk", "commander"]
}
```

```json {{ title: 'Paketregeln' }}
{
  "packageRules": [
    {
      "patterns": ["react", "react-dom"],
      "target": "minor",
      "requireConfirmation": true,
      "relatedPackages": ["@types/react", "@types/react-dom"]
    },
    {
      "patterns": ["@types/*"],
      "target": "latest",
      "autoUpdate": true
    },
    {
      "patterns": ["eslint*", "prettier"],
      "target": "minor",
      "groupUpdate": true
    }
  ]
}
```

</CodeGroup>

### Paketregeln-Eigenschaften

<Properties>
  <Property name="patterns" type="string[]" required>
    Glob-Pattern zur √úbereinstimmung mit Paketnamen
  </Property>
  <Property name="target" type="enum">
    Update-Ziel: latest, greatest, minor, patch, newest
  </Property>
  <Property name="requireConfirmation" type="boolean">
    Immer vor dem Update dieser Pakete fragen
  </Property>
  <Property name="autoUpdate" type="boolean">
    Automatisch ohne Best√§tigung aktualisieren
  </Property>
  <Property name="relatedPackages" type="string[]">
    Pakete, die der gleichen Update-Strategie folgen
  </Property>
  <Property name="groupUpdate" type="boolean">
    Verwandte Pakete zusammen aktualisieren
  </Property>
</Properties>

## Sicherheitskonfiguration

Konfigurieren Sie Sicherheitsl√ºcken-Scanning und automatische Korrekturen.

```json
{
  "security": {
    "autoFixVulnerabilities": true,
    "allowMajorForSecurity": true,
    "notifyOnSecurityUpdate": true
  }
}
```

<Properties>
  <Property name="autoFixVulnerabilities" type="boolean">
    Sicherheitsl√ºcken automatisch pr√ºfen und beheben
  </Property>
  <Property name="allowMajorForSecurity" type="boolean">
    Major-Version-Upgrades f√ºr Sicherheitsfixes erlauben
  </Property>
  <Property name="notifyOnSecurityUpdate" type="boolean">
    Benachrichtigungen bei Sicherheitsupdates anzeigen
  </Property>
</Properties>

## Monorepo-Konfiguration

Spezielle Einstellungen f√ºr komplexe Monorepo-Setups mit mehreren Katalogen.

```json
{
  "monorepo": {
    "syncVersions": ["react", "react-dom"],
    "catalogPriority": ["default", "latest", "react17"]
  }
}
```

<Properties>
  <Property name="syncVersions" type="string[]">
    Pakete, die Versionssynchronisation √ºber mehrere Kataloge hinweg ben√∂tigen
  </Property>
  <Property name="catalogPriority" type="string[]">
    Katalog-Priorit√§tsreihenfolge f√ºr Konfliktl√∂sung
  </Property>
</Properties>

## Erweiterte Einstellungen

Optimieren Sie Performance und Verhalten mit erweiterten Konfigurationsoptionen.

```json
{
  "advanced": {
    "concurrency": 5,
    "timeout": 30000,
    "retries": 3,
    "cacheValidityMinutes": 60,
    "checkForUpdates": true
  }
}
```

<Properties>
  <Property name="concurrency" type="number" default="5">
    Anzahl gleichzeitiger Netzwerk-Requests
  </Property>
  <Property name="timeout" type="number" default="30000">
    Netzwerk-Request-Timeout in Millisekunden
  </Property>
  <Property name="retries" type="number" default="3">
    Anzahl Wiederholungsversuche bei Fehlern
  </Property>
  <Property name="cacheValidityMinutes" type="number" default="60">
    Cache-G√ºltigkeitsdauer (0 deaktiviert Caching)
  </Property>
  <Property name="checkForUpdates" type="boolean" default="true">
    Beim Start automatisch nach PCU-Tool-Updates suchen. √úbersprungen in CI-Umgebungen. Zeigt
    Update-Benachrichtigungen und Installationsanweisungen an, wenn neuere Versionen verf√ºgbar sind.
  </Property>
</Properties>

## UI-Konfiguration

Passen Sie das visuelle Erscheinungsbild und die Benutzeroberfl√§chen-Einstellungen an.

```json
{
  "ui": {
    "theme": "modern",
    "progressBars": true,
    "progressBarStyle": "gradient",
    "animations": true
  },
  "output": {
    "format": "table",
    "color": true,
    "verbose": false
  }
}
```

### Verf√ºgbare Themes

- `default` - Ausgewogene Farben f√ºr allgemeine Nutzung
- `modern` - Lebendige Farben f√ºr Entwicklungsumgebungen
- `minimal` - Sauber und einfach f√ºr Produktionsumgebungen
- `neon` - Hohe Kontrastfarben f√ºr Pr√§sentationen

### Fortschrittsbalken-Stile

PCU unterst√ºtzt 6 verschiedene Fortschrittsbalken-Stile f√ºr verbessertes visuelles Feedback w√§hrend Operationen:

- `default` - Standard-Fortschrittsbalken mit Basis-Styling
- `gradient` - Farbverlauf-Fortschrittsbalken f√ºr modernes Erscheinungsbild
- `fancy` - Verbesserter Fortschrittsbalken mit dekorativen Elementen
- `minimal` - Sauberer und einfacher Fortschrittsindikator
- `rainbow` - Mehrfarbiger Fortschrittsbalken f√ºr lebendige Anzeigen
- `neon` - Hochkontrast-Fortschrittsbalken passend zum Neon-Theme

**Konfigurationsbeispiel:**

```json
{
  "ui": {
    "theme": "modern",
    "progressBars": true,
    "progressBarStyle": "gradient"
  }
}
```

**Kommandozeilen-Nutzung:**

```bash
pcu check --progress-style fancy
pcu update --progress-style rainbow
pcu security --progress-style neon
```

## Konfigurationspriorit√§t

Konfigurationseinstellungen werden in dieser Priorit√§tsreihenfolge angewendet:

1. **Kommandozeilen-Flags** (h√∂chste Priorit√§t)
2. **Paketspezifische Regeln** in `.pcurc.json`
3. **Allgemeine Einstellungen** in `.pcurc.json`
4. **Standardwerte** (niedrigste Priorit√§t)

<Note>
  Verwandte Pakete erben automatisch Einstellungen von ihren √ºbergeordneten Paketregeln, wodurch
  Versionskonsistenz √ºber √ñkosystem-Pakete hinweg sichergestellt wird.
</Note>

## Beispiele

### React-√ñkosystem

```json
{
  "packageRules": [
    {
      "patterns": ["react", "react-dom"],
      "target": "minor",
      "requireConfirmation": true,
      "relatedPackages": ["@types/react", "@types/react-dom", "react-router-dom"]
    }
  ]
}
```

### TypeScript-Projekt

```json
{
  "packageRules": [
    {
      "patterns": ["typescript"],
      "target": "minor",
      "requireConfirmation": true
    },
    {
      "patterns": ["@types/*"],
      "target": "latest",
      "autoUpdate": true
    }
  ]
}
```

### Enterprise-Setup

```json
{
  "defaults": {
    "target": "minor",
    "createBackup": true
  },
  "security": {
    "autoFixVulnerabilities": true,
    "allowMajorForSecurity": true
  },
  "ui": {
    "theme": "minimal",
    "progressBars": true,
    "progressBarStyle": "minimal"
  },
  "advanced": {
    "concurrency": 3,
    "timeout": 60000
  },
  "exclude": ["typescript", "@types/node", "react", "react-dom"]
}
```

---

## Umgebungsvariablen

Alle CLI-Optionen k√∂nnen √ºber Umgebungsvariablen f√ºr Automatisierung und CI/CD-Umgebungen konfiguriert werden:

<CodeGroup>

```bash {{ title: 'Globale Umgebungsvariablen' }}
# Workspace-Einstellungen
export PCU_WORKSPACE="/path/to/workspace"
export PCU_VERBOSE=true
export PCU_NO_COLOR=true

# Registry-Konfiguration
export PCU_REGISTRY="https://npm.company.com/"
export PCU_TIMEOUT=30000

# Konfigurationsdatei
export PCU_CONFIG="/path/to/.pcurc.json"
```

```bash {{ title: 'Befehlsspezifische Variablen' }}
# Check/Update-Verhalten
export PCU_OUTPUT_FORMAT=json
export PCU_UPDATE_TARGET=minor
export PCU_CATALOG=default

# Update-Optionen
export PCU_INTERACTIVE=true
export PCU_DRY_RUN=true
export PCU_CREATE_BACKUP=true
export PCU_FORCE=false

# Filterung
export PCU_INCLUDE="react*,@types/*"
export PCU_EXCLUDE="eslint*"
export PCU_PRERELEASE=false
```

</CodeGroup>

### Umgebungsvariablen-Priorit√§t

Konfigurationsquellen werden in dieser Reihenfolge geladen (sp√§tere √ºberschreiben fr√ºhere):

1. **Eingebaute Standardwerte** (niedrigste Priorit√§t)
2. **Globale Konfiguration** (`~/.pcurc.json`)
3. **Projektkonfiguration** (`.pcurc.json`)
4. **Umgebungsvariablen** (`PCU_*`)
5. **Kommandozeilen-Flags** (h√∂chste Priorit√§t)

---

## Registry-Konfiguration

PCU liest automatisch NPM- und PNPM-Konfigurationsdateien f√ºr Registry-Einstellungen:

<CodeGroup>

```ini {{ title: '.npmrc / .pnpmrc' }}
# Standard-Registry
registry=https://registry.npmjs.org/

# Scoped Registries
@mycompany:registry=https://npm.mycompany.com/
@types:registry=https://registry.npmjs.org/

# Authentication-Token
//npm.mycompany.com/:_authToken=${NPM_TOKEN}
//registry.npmjs.org/:_authToken=${NPM_PUBLIC_TOKEN}

# Legacy-Authentifizierung (falls ben√∂tigt)
//npm.mycompany.com/:username=myuser
//npm.mycompany.com/:_password=base64encodedpassword
//npm.mycompany.com/:email=user@company.com

# SSL- und Proxy-Einstellungen
strict-ssl=true
ca=/path/to/ca.pem
proxy=http://proxy.company.com:8080
https-proxy=http://proxy.company.com:8080
```

```json {{ title: 'PCU Registry-√úberschreibung' }}
{
  "registry": {
    "default": "https://registry.npmjs.org/",
    "scoped": {
      "@mycompany": "https://npm.mycompany.com/",
      "@types": "https://registry.npmjs.org/"
    },
    "auth": {
      "npm.mycompany.com": {
        "token": "${NPM_TOKEN}",
        "type": "Bearer"
      }
    },
    "timeout": 30000,
    "retries": 3,
    "userAgent": "pcu-custom/1.0.0"
  }
}
```

</CodeGroup>

### Registry-Priorit√§t

1. **CLI `--registry`-Flag** (h√∂chste Priorit√§t)
2. **PCU-Konfiguration** (`.pcurc.json` Registry-Sektion)
3. **Projekt `.npmrc/.pnpmrc`**
4. **Globale `.npmrc/.pnpmrc`**
5. **Standard-NPM-Registry** (niedrigste Priorit√§t)

---

## Erweiterte Cache-Konfiguration

PCU enth√§lt ein erweiterte Caching-System zur Leistungsverbesserung:

<CodeGroup>

```json {{ title: 'Cache-Konfiguration' }}
{
  "cache": {
    "enabled": true,
    "ttl": 3600000,
    "maxSize": 52428800,
    "maxEntries": 10000,
    "persistToDisk": true,
    "cacheDir": "~/.pcu/cache",
    "strategy": "lru"
  }
}
```

```bash {{ title: 'Cache-Verwaltung' }}
# Alle Caches l√∂schen
rm -rf ~/.pcu/cache

# Cache-Informationen im ausf√ºhrlichen Modus anzeigen
pcu -c --verbose

# Caching f√ºr einzelnen Lauf deaktivieren
pcu -c --no-cache

# Benutzerdefiniertes Cache-Verzeichnis setzen
export PCU_CACHE_DIR="/tmp/pcu-cache"
```

</CodeGroup>

### Cache-Einstellungen

<Properties>
  <Property name="enabled" type="boolean" default="true">
    Cache-System aktivieren/deaktivieren
  </Property>
  <Property name="ttl" type="number" default="3600000">
    Lebensdauer in Millisekunden (standardm√§√üig 1 Stunde)
  </Property>
  <Property name="maxSize" type="number" default="52428800">
    Maximale Cache-Gr√∂√üe in Bytes (standardm√§√üig 50MB)
  </Property>
  <Property name="maxEntries" type="number" default="10000">
    Maximale Anzahl von Cache-Eintr√§gen
  </Property>
  <Property name="persistToDisk" type="boolean" default="true">
    Cache zwischen L√§ufen auf Festplatte speichern
  </Property>
  <Property name="cacheDir" type="string" default="~/.pcu/cache">
    Verzeichnis f√ºr persistente Cache-Speicherung
  </Property>
  <Property name="strategy" type="enum" default="lru">
    Cache-Eviction-Strategie: lru, fifo, lfu
  </Property>
</Properties>

---

## Validierungskonfiguration

PCU enth√§lt umfassende Validierung mit hilfreichen Vorschl√§gen:

<CodeGroup>

```json {{ title: 'Validierungskonfiguration' }}
{
  "validation": {
    "strict": true,
    "warnOnRiskyUpdates": true,
    "requireConfirmationFor": ["major"],
    "suggestions": {
      "enabled": true,
      "includePerformanceTips": true,
      "includeBestPractices": true
    }
  }
}
```

```bash {{ title: 'Validierungsbeispiele' }}
# Strikten Validierungsmodus aktivieren
pcu -u --force  # Zeigt Warnungen √ºber fehlende Backups

# Validierungsvorschl√§ge anzeigen
pcu -c --verbose  # Zeigt zus√§tzliche Tipps und Vorschl√§ge

# Konfigurationsdatei validieren
node -e "console.log(JSON.parse(require('fs').readFileSync('.pcurc.json')))"
```

</CodeGroup>

### Validierungsoptionen

<Properties>
  <Property name="strict" type="boolean" default="false">
    Strikten Validierungsmodus mit zus√§tzlichen Pr√ºfungen aktivieren
  </Property>
  <Property name="warnOnRiskyUpdates" type="boolean" default="true">
    Warnungen f√ºr potenziell riskante Updates anzeigen
  </Property>
  <Property name="requireConfirmationFor" type="array" default="[]">
    Update-Typen, die Best√§tigung erfordern: major, minor, patch
  </Property>
  <Property name="suggestions.enabled" type="boolean" default="true">
    Hilfreiche Vorschl√§ge und Tipps aktivieren
  </Property>
  <Property name="suggestions.includePerformanceTips" type="boolean" default="true">
    Leistungsoptimierungs-Vorschl√§ge einbeziehen
  </Property>
  <Property name="suggestions.includeBestPractices" type="boolean" default="true">
    Best-Practice-Empfehlungen einbeziehen
  </Property>
</Properties>

---

## Interaktive Modus-Konfiguration

Konfigurieren Sie interaktive Eingabeaufforderungen und Benutzererfahrung:

<CodeGroup>

```json {{ title: 'Interaktive Konfiguration' }}
{
  "interactive": {
    "enabled": true,
    "pageSize": 15,
    "showPackageDescriptions": true,
    "showReleaseNotes": false,
    "autoComplete": {
      "enabled": true,
      "fuzzyMatching": true,
      "maxSuggestions": 10
    },
    "confirmations": {
      "majorUpdates": true,
      "forceUpdates": true,
      "multiplePackages": false
    }
  }
}
```

```bash {{ title: 'Interaktive Modus-Beispiele' }}
# Interaktiven Modus starten
pcu -i

# Interaktiv mit Paketbeschreibungen
pcu -i --verbose  # Zeigt mehr Details in interaktiver Auswahl

# Interaktive Theme-Auswahl verwenden
pcu theme --interactive
```

</CodeGroup>

### Interaktive Einstellungen

<Properties>
  <Property name="enabled" type="boolean" default="true">
    Interaktive Modus-Funktionen aktivieren
  </Property>
  <Property name="pageSize" type="number" default="15">
    Anzahl der Elemente pro Seite in Listen
  </Property>
  <Property name="showPackageDescriptions" type="boolean" default="false">
    Paketbeschreibungen in Auswahllisten anzeigen
  </Property>
  <Property name="showReleaseNotes" type="boolean" default="false">
    Release-Notes f√ºr Updates anzeigen (erfordert Netzwerk)
  </Property>
  <Property name="autoComplete.enabled" type="boolean" default="true">
    Auto-Vervollst√§ndigung f√ºr Paketnamen aktivieren
  </Property>
  <Property name="autoComplete.fuzzyMatching" type="boolean" default="true">
    Fuzzy-Matching f√ºr Auto-Vervollst√§ndigung aktivieren
  </Property>
  <Property name="confirmations.majorUpdates" type="boolean" default="true">
    Best√§tigung f√ºr Major-Versions-Updates erforderlich
  </Property>
</Properties>

---

## Monorepo-Konfiguration

PCU bietet erweiterte Features speziell f√ºr gro√üe Monorepos und komplexes Workspace-Management.

### Versionssynchronisation

Halten Sie verwandte Pakete √ºber Ihr Monorepo hinweg synchronisiert:

<CodeGroup>

```json {{ title: 'Versions-Sync-Konfiguration' }}
{
  "monorepo": {
    "syncVersions": {
      "enabled": true,
      "groups": [
        {
          "name": "react-ecosystem",
          "packages": ["react", "react-dom", "@types/react", "@types/react-dom"],
          "strategy": "exact" // oder "compatible", "latest"
        },
        {
          "name": "testing-libraries",
          "packages": ["jest", "@testing-library/*", "@types/jest"],
          "strategy": "compatible"
        }
      ]
    },
    "catalogPriority": ["default", "react17", "node18"],
    "crossWorkspaceDependencies": {
      "analyze": true,
      "enforce": "warn" // "error", "warn", "off"
    }
  }
}
```

```json {{ title: 'Gro√üe Workspace-Optimierung' }}
{
  "monorepo": {
    "performance": {
      "batchSize": 50,
      "concurrency": 15,
      "cacheWorkspaceStructure": true,
      "parallelCatalogProcessing": true
    },
    "workspacePackages": {
      "autoDiscover": true,
      "includePrivate": false,
      "excludePatterns": ["**/node_modules", "**/dist", "**/coverage"]
    }
  }
}
```

</CodeGroup>

### Erweiterte Workspace-Verwaltung

#### Katalog-Priorit√§tssystem

Definieren Sie, welche Kataloge Vorrang haben, wenn Konflikte auftreten:

```json
{
  "catalogPriority": ["production", "default", "experimental"],
  "catalogConflictResolution": "priority" // oder "interactive", "error"
}
```

#### Cross-Workspace-Dependencies

Analysieren und verwalten Sie Abh√§ngigkeiten zwischen Workspace-Paketen:

<Properties>
  <Property name="analyze" type="boolean" default="false">
    Cross-Workspace-Dependencies analysieren
  </Property>
  <Property name="enforce" type="enum" default="warn">
    Wie mit Versionskonflikten umgegangen wird: error, warn, off
  </Property>
  <Property name="reportUnused" type="boolean" default="true">
    Pakete in Katalogen melden, die von keinem Workspace-Paket verwendet werden
  </Property>
  <Property name="validateVersions" type="boolean" default="true">
    Validieren, dass alle Workspace-Pakete Katalogversionen verwenden
  </Property>
</Properties>

### Monorepo-spezifische Paketregeln

Erstellen Sie anspruchsvolle Regeln f√ºr verschiedene Bereiche Ihres Monorepos:

<CodeGroup>

```json {{ title: 'Monorepo-Paketregeln' }}
{
  "packageRules": [
    {
      "name": "Frontend-Pakete",
      "patterns": ["react*", "@types/react*", "next*"],
      "workspacePackages": ["apps/web", "apps/admin"],
      "target": "minor",
      "groupUpdate": true,
      "requireConfirmation": true
    },
    {
      "name": "Backend-Dependencies",
      "patterns": ["express*", "@types/express*", "fastify*"],
      "workspacePackages": ["apps/api", "services/*"],
      "target": "patch",
      "autoUpdate": false
    },
    {
      "name": "Entwicklungstools",
      "patterns": ["eslint*", "prettier", "typescript"],
      "workspacePackages": ["*"], // Alle Pakete
      "target": "latest",
      "autoUpdate": true,
      "excludeFromProduction": true
    }
  ]
}
```

</CodeGroup>

### Workspace-spezifische Konfiguration

Verschiedene Konfigurationen f√ºr verschiedene Teile Ihres Monorepos:

<CodeGroup>

```json {{ title: 'Per-Workspace-Regeln' }}
{
  "workspaceRules": {
    "apps/web": {
      "defaults": {
        "target": "minor",
        "createBackup": true
      },
      "packageRules": [
        {
          "patterns": ["react*"],
          "target": "patch"
        }
      ]
    },
    "packages/*": {
      "defaults": {
        "target": "latest",
        "requireConfirmation": false
      }
    },
    "tools/*": {
      "defaults": {
        "target": "latest",
        "autoUpdate": true
      }
    }
  }
}
```

</CodeGroup>

### Leistungsoptimierung f√ºr gro√üe Monorepos

#### Batch-Processing-Konfiguration

<Properties>
  <Property name="batchSize" type="number" default="20">
    Anzahl der Pakete, die in jedem Batch verarbeitet werden
  </Property>
  <Property name="concurrency" type="number" default="5">
    Maximale Anzahl gleichzeitiger Operationen
  </Property>
  <Property name="cacheWorkspaceStructure" type="boolean" default="true">
    Workspace-Paket-Discovery zwischen L√§ufen cachen
  </Property>
  <Property name="parallelCatalogProcessing" type="boolean" default="true">
    Mehrere Kataloge parallel verarbeiten
  </Property>
</Properties>

#### Speicherverwaltung

```json
{
  "monorepo": {
    "memoryOptimization": {
      "streamingMode": true, // Pakete verarbeiten ohne alles in den Speicher zu laden
      "maxMemoryUsage": "2GB", // Speicherlimit f√ºr gro√üe Workspaces
      "temporaryFileCleanup": "immediate" // "immediate", "session-end", "manual"
    }
  }
}
```

### Monorepo-Validierung

Umfassende Validierung f√ºr komplexe Workspace-Setups:

#### Validierungsregeln

<Properties>
  <Property name="enforceWorkspaceProtocol" type="boolean" default="true">
    Sicherstellen, dass workspace:-Protokoll f√ºr interne Dependencies verwendet wird
  </Property>
  <Property name="validateCatalogCoverage" type="boolean" default="true">
    Sicherstellen, dass alle Dependencies von Katalogen abgedeckt sind
  </Property>
  <Property name="requireConsistentVersions" type="boolean" default="false">
    Erfordern, dass alle Workspace-Pakete die gleiche Version geteilter Dependencies verwenden
  </Property>
  <Property name="detectCircularDependencies" type="boolean" default="true">
    Zirkul√§re Dependencies zwischen Workspace-Paketen erkennen
  </Property>
</Properties>

### Verwendungsbeispiele f√ºr Monorepos

#### Gro√ües Enterprise-Monorepo-Setup

```json
{
  "monorepo": {
    "syncVersions": {
      "enabled": true,
      "groups": [
        {
          "name": "core-frontend",
          "packages": ["react", "react-dom", "react-router", "@types/react*"],
          "strategy": "exact"
        },
        {
          "name": "ui-libraries",
          "packages": ["@company/design-system", "@company/components"],
          "strategy": "workspace"
        }
      ]
    },
    "performance": {
      "batchSize": 100,
      "concurrency": 20,
      "streamingMode": true
    },
    "workspaceRules": {
      "apps/*": { "target": "minor", "requireConfirmation": true },
      "packages/*": { "target": "latest", "autoUpdate": true },
      "tools/*": { "target": "latest", "autoUpdate": true }
    }
  }
}
```

#### CI/CD-optimierte Konfiguration

```json
{
  "monorepo": {
    "ci": {
      "parallelCatalogProcessing": true,
      "skipInteractivePrompts": true,
      "generateReport": true,
      "reportFormat": "json",
      "exitOnError": true
    },
    "validation": {
      "enforceWorkspaceProtocol": true,
      "validateCatalogCoverage": true,
      "failOnInconsistentVersions": true
    }
  }
}
```
